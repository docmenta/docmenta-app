<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- Put your custom HTML head tags here and select this file in the HTML output configuration. -->
<!-- Note: The content of this file has to be XML (XHTML). -->
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="expires" content="43200" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="Docmenta 1.9.0"/>
<title>4.8.1. Customizing the transformation to DocBook</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="home" href="index.html" title="Docmenta Tutorial and Reference"/>
<link rel="up" href="customize_pdf_stylesheet.html" title="4.8. PDF stylesheet customization"/>
<link rel="prev" href="customize_pdf_stylesheet.html" title="4.8. PDF stylesheet customization"/>
<link rel="prev" href="pt04ch08s02.html" title="4.8.2. Customizing the DocBook stylesheets"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css"/>
<link rel="stylesheet" type="text/css" href="common/css/positioning.css"/>
<script type="text/javascript">
  var treeCookieId = "treeview-1494620492909";
  var language = "en";
  var w = new Object();
  txt_filesfound = "Results";
  txt_enter_at_least_1_char = "You must enter at least one character.";
  txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
  txt_please_wait = "Please wait. Search in progress...";
  txt_results_for = "Results for: ";
</script>
<script type="text/javascript" src="common/jquery/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery.cookie.js"></script>
<script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script>
<script type="text/javascript" src="search/htmlFileList.js"></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"></script>
<script type="text/javascript" src="search/nwSearchFnt.js"></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js"></script>
<script type="text/javascript" src="search/index-1.js"></script>
<script type="text/javascript" src="search/index-2.js"></script>
<script type="text/javascript" src="search/index-3.js"></script>
<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript" src="common/main.js"></script>
</head>
<body>
<div id="header"><img id="webhelplogo1" align="left" src='common/images/logo1.png' alt="Logo"/><img id="webhelplogo2" align="right" src='common/images/logo2.png' alt="Logo"/><div class="webhelptitle"><div class="webhelptitle1">Chapter 4.8. PDF stylesheet customization</div><div class="webhelptitle2">4.8.1. Customizing the transformation to DocBook</div></div><div id="navheader" align="right"><table><tr><td><img src="common/images/highlight-blue.gif" alt="H" onclick="toggleHighlight()" id="showHideHighlight" title="Toggle search result highlighting" /></td><td><a id="navhead-prev" accesskey="p" href="customize_pdf_stylesheet.html"><span class="navlink-text">Prev</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-up" accesskey="u" href="customize_pdf_stylesheet.html"><span class="navlink-text">Up</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-next" accesskey="n" href="pt04ch08s02.html"><span class="navlink-text">Next</span></a></td></tr></table></div></div>
<div id="leftnavigation"><div id="tabs"><ul id="tocsearchnavigation" style="display:none"><li id="tocnavigationtab"><a href="#treeDiv"><em>Contents</em></a></li><li id="searchnavigationtab"><a href="#searchDiv"><em>Search</em></a></li></ul><div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none;"><div id="treenavigationtitle" style="display:none;">Contents</div><ul id="tree" class="filetree"><li><span class="file"><a href="pt04ch01.html">Introduction</a></span></li><li><span class="file"><a href="create_plugin_package.html">Creating a plug-in package</a></span></li><li><span class="file"><a href="plugin_api.html">Plug-in API</a></span><ul><li><span class="file"><a href="plugin_lifecycle_methods.html">Lifecycle methods</a></span></li><li><span class="file"><a href="plugin_add_menu.html">Adding menu items</a></span></li><li><span class="file"><a href="plugin_add_dialog.html">Adding a dialog</a></span><ul><li><span class="file"><a href="plugin_plain_js_dialogs.html">Plain JavaScript Dialogs</a></span></li><li><span class="file"><a href="plugin_zk_dialogs.html">ZK Dialogs</a></span></li></ul></li><li><span class="file"><a href="plugin_add_tab.html">Adding a tab</a></span></li><li><span class="file"><a href="plugin_jsp_integration.html">JSP integration</a></span></li><li><span class="file"><a href="pt04ch03s06.html">Accessing content</a></span></li></ul></li><li><span class="file"><a href="content_handler_plugins.html">Editor and viewer plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s01.html">Content Handlers</a></span></li><li><span class="file"><a href="plug_viewer.html">Viewer Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s02s01.html">initialize</a></span></li><li><span class="file"><a href="pt04ch04s02s02.html">getApplicationId</a></span></li><li><span class="file"><a href="pt04ch04s02s03.html">getApplicationName</a></span></li><li><span class="file"><a href="pt04ch04s02s04.html">getSupportedViewExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s05.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s06.html">getPreviewURL</a></span></li><li><span class="file"><a href="pt04ch04s02s07.html">openViewer</a></span></li><li><span class="file"><a href="pt04ch04s02s08.html">openEditor</a></span></li><li><span class="file"><a href="pt04ch04s02s09.html">setCharEntities</a></span></li><li><span class="file"><a href="plug_view_handler_complete.html">The complete viewer class</a></span></li><li><span class="file"><a href="pt04ch04s02s11.html">The view.jsp page</a></span></li><li><span class="file"><a href="plug_viewer_package.html">Creating the viewer plug-in</a></span></li><li><span class="file"><a href="plug_viewer_install.html">Installing the viewer plug-in</a></span></li></ul></li><li><span class="file"><a href="pt04ch04s03.html">Editor Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s03s01.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s03s02.html">openEditor</a></span></li><li><span class="file"><a href="plug_edit_handler_complete.html">The complete editor class</a></span></li><li><span class="file"><a href="pt04ch04s03s04.html">The edit.jsp page</a></span></li><li><span class="file"><a href="pt04ch04s03s05.html">Creating the editor plug-in</a></span></li></ul></li></ul></li><li><span class="file"><a href="rule_plugins.html">Rule plug-ins</a></span><ul><li><span class="file"><a href="html_rule_getShortInfo.html">getShortInfo</a></span></li><li><span class="file"><a href="pt04ch05s02.html">getLongInfo</a></span></li><li><span class="file"><a href="pt04ch05s03.html">getCheckIds</a></span></li><li><span class="file"><a href="pt04ch05s04.html">getCheckTitle</a></span></li><li><span class="file"><a href="pt04ch05s05.html">supportsAutoCorrection</a></span></li><li><span class="file"><a href="pt04ch05s06.html">getDefaultLogLevel</a></span></li><li><span class="file"><a href="pt04ch05s07.html">configure</a></span></li><li><span class="file"><a href="pt04ch05s08.html">startBatch</a></span></li><li><span class="file"><a href="pt04ch05s09.html">finishBatch</a></span></li><li><span class="file"><a href="html_rule_apply.html">apply</a></span></li><li><span class="file"><a href="my_html_rule_complete.html">The complete example</a></span></li><li><span class="file"><a href="pt04ch05s12.html">Creating the Rule Plug-in</a></span></li></ul></li><li><span class="file"><a href="autoformat_plugins.html">AutoFormat plug-ins</a></span><ul><li><span class="file"><a href="pt04ch06s01.html">AutoFormat Transformations</a></span></li><li><span class="file"><a href="pt04ch06s02.html">AutoFormat Example</a></span></li><li><span class="file"><a href="pt04ch06s03.html">Creating an AutoFormat Plug-in</a></span></li></ul></li><li><span class="file"><a href="output_plugins.html">Output plug-ins</a></span></li><li><span class="file"><a href="customize_pdf_stylesheet.html">PDF stylesheet customization</a></span><ul><li id="webhelp-currentid"><span class="file"><a href="customize_docbook_transformation.html">Customizing the transformation to DocBook</a></span></li><li><span class="file"><a href="pt04ch08s02.html">Customizing the DocBook stylesheets</a></span></li><li><span class="file"><a href="pt04ch08s03.html">Creating the stylesheet plug-in</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="startWebHelpSearch(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><div align="center"><input id="textToSearch" name="textToSearch" type="text" class="searchText"/>&nbsp;<input onclick="startWebHelpSearch(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></div></fieldset></form></div><div id="closeSearchResults" style="display:none"><a href="javascript:closeSearchShowToc();">Contents</a></div><div id="searchResults"><div align="center"></div></div></div></div></div>
<div id="bookpartsnavigation"><ul><li><a href="tutorial.html">Tutorial</a></li><li><a href="reference_manual.html">User Manual</a></li><li><a href="xhtml_reference.html">XHTML Reference</a></li><li class="book-currentpart"><a href="plugin_developer_guide.html">Plug-in Developer Guide</a></li></ul></div>
<div id="breadcrumbsnavigation" class="breadcrumbs"><span class="breadcrumb-link"><a class="breadcrumb_node" href="plugin_developer_guide.html">Plug-in Developer Guide</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb-link"><a class="breadcrumb_node" href="customize_pdf_stylesheet.html">PDF stylesheet customization</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb_node breadcrumb_lastnode">Customizing the transformation to DocBook</span></div>
<div id="content"><div id="customize_docbook_transformation" class="section"><h3>4.8.1. Customizing the transformation to DocBook</h3><div title="Extend transformation to Docbook" class="doc-content"><div class="normal-para">The transformation from XHTML to DocBook is done by the <span class="code">docma/html2docbook.xsl</span> script located in the web application folder of Docmenta. If a plug-in adds files with one of the prefixes listed in the following table, then the content of these files is included in the <span class="code">html2docbook.xsl</span> file. The resulting XSL code is used to transform the XHTML content to DocBook. The files have to be located in the same folder as the <span class="code">html2docbook.xsl</span> script.</div>
<table border="2" cellpadding="4" cellspacing="0" style="border-color: #000000; border-width: 2px; width: 100%; border-style: solid;" rules="rows"><caption>Table 4.8.1. Filename prefixes for DocBook transformation files</caption>
<tbody>
<tr><th style="width: 200px;">File Prefix</th><th>Description</th></tr>
<tr>
<td><span class="code">html2db-</span></td>
<td>Files with this prefix are included for <em>all</em> DocBook-based exports (DocBook, PDF, static HTML, WebHelp V1 and EPUB).</td>
</tr>
<tr>
<td><span class="code">html2db_print-</span></td>
<td>Files with this prefix are included for print output (for example PDF), but <em>not</em> for HTML-based output formats.</td>
</tr>
<tr>
<td><span class="code">html2db_pdf-</span></td>
<td>Files with this prefix are only included for PDF output.</td>
</tr>
<tr>
<td><span class="code">html2db_html-</span></td>
<td>Files with this prefix are only included for HTML-based output formats that utilize the DocBook stylesheets (static HTML, WebHelp V1 and EPUB).</td>
</tr>
</tbody>
</table>
<div class="header_note">
<div class="normal-para">Note: WebHelp V2</div>
</div>
<div class="note_box">
<div class="normal-para">The WebHelp V2 format is <em>not</em> based on DocBook. Therefore, none of these transformation files have impact on the WebHelp V2 output. To adapt the output of WebHelp V2, AutoFormat styles can be used (see <a href="autoformat_plugins.html" title="4.6. AutoFormat plug-ins">Chapter 4.6, AutoFormat plug-ins</a>).</div>
</div>
<div class="normal-para">As an example, we add support for side floats in print output. A side float shall be defined by a paragraph or <span class="code">div</span> block, which has a style with ID <span class="code">aside</span> assigned. In DocBook an element named <span class="code">sidebar</span> exists for creating side floats. That means, all that needs to be achieved in the export process, is to transform <span class="code">p</span> and <span class="code">div</span> elements, which have the CSS class "<span class="code">aside</span>" assigned, into DocBook <span class="code">sidebar</span> elements. Therefore, we add a file named <span class="code">html2db_print-aside.xsl</span> to the <span class="code">docma</span> folder of Docmenta. Following the content of the file:</div>
<div title="html2db_print-aside.xsl" class="formal-block"><div class="formal-contents"><div id="plug_html2db_aside_listing" title="html2db_print-aside.xsl" class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div></td><td valign="top" class="listing_xml"><div class="listing_line">  <span class="code_tag">&lt;xsl:template </span><span class="code_attrib">match=</span><span class="code_attval">"div[@class='aside']"</span><span class="code_tag">&gt;</span>
</div><div class="listing_line">    <span class="code_tag">&lt;sidebar&gt;</span><span class="code_tag">&lt;xsl:apply-templates /&gt;</span><span class="code_tag">&lt;/sidebar&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;/xsl:template&gt;</span>
</div><div class="listing_line"> 
</div><div class="listing_line">  <span class="code_tag">&lt;xsl:template </span><span class="code_attrib">match=</span><span class="code_attval">"p[@class='aside']"</span><span class="code_tag">&gt;</span>
</div><div class="listing_line">    <span class="code_tag">&lt;sidebar&gt;</span><span class="code_tag">&lt;xsl:apply-templates /&gt;</span><span class="code_tag">&lt;/sidebar&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;/xsl:template&gt;</span>
</div></td></tr></table></div></div><p class="title">Listing 4.8.1. html2db_print-aside.xsl</p></div>
<div class="normal-para">Note that Docmenta also defines XSL templates for handling <span class="code">p</span> and <span class="code">div</span> elements. In our example, the templates defined in <a href="customize_docbook_transformation.html#plug_html2db_aside_listing" title="4.8.1. html2db_print-aside.xsl">4.8.1: html2db_print-aside.xsl</a> automatically replace the Docmenta templates due to the priorization rules of XSLT. However, in some cases it may be necessary to explicitely increase the priority of an added template by using the XSLT <span class="code">priority</span> attribute.</div>
<div class="normal-para">For the sidebar element to be rendered as side float, we also have to set the DocBook XSL parameter "<span class="code">sidebar.float.type</span>". To achieve this, we have to extend the customization layer of the DocBook XSL stylesheets. This is described in the following section.</div>
</div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="customize_pdf_stylesheet.html"><span class="navlink-text">Prev</span></a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="customize_pdf_stylesheet.html"><span class="navlink-text">Up</span></a></td><td width="40%" align="right">&#160;<a accesskey="n" href="pt04ch08s02.html"><span class="navlink-text">Next</span></a></td></tr><tr><td width="40%" align="left" valign="top">4.8. PDF stylesheet customization&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><span class="navlink-text">Home</span></a></td><td width="40%" align="right" valign="top">&#160;4.8.2. Customizing the DocBook stylesheets</td></tr></table></div>
<div class="web_footer">
<p class="align-center">&#169; 2017 - www.docmenta.org</p>
</div>
</div>
<a id="showHideButton" onclick="showHideToc();" class="pointLeft" title="Hide TOC tree">&nbsp;</a></body>
</html>
