<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- Put your custom HTML head tags here and select this file in the HTML output configuration. -->
<!-- Note: The content of this file has to be XML (XHTML). -->
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="expires" content="43200" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="Docmenta 1.8.0"/>
<title>1.13.16. Creating a plug-in</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="home" href="index.html" title="Docmenta Tutorial and Reference"/>
<link rel="up" href="pt01ch13.html" title="1.13. Advanced Tasks"/>
<link rel="prev" href="integrate_other_systems.html" title="1.13.15. Integration with other systems"/>
<link rel="prev" href="reference_manual.html" title="2. Reference Manual"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css"/>
<link rel="stylesheet" type="text/css" href="common/css/positioning.css"/>
<script type="text/javascript">
  var treeCookieId = "treeview-1442167773683";
  var language = "en";
  var w = new Object();
  txt_filesfound = "Results";
  txt_enter_at_least_1_char = "You must enter at least one character.";
  txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
  txt_please_wait = "Please wait. Search in progress...";
  txt_results_for = "Results for: ";
</script>
<script type="text/javascript" src="common/jquery/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery.cookie.js"></script>
<script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script>
<script type="text/javascript" src="search/htmlFileList.js"></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"></script>
<script type="text/javascript" src="search/nwSearchFnt.js"></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js"></script>
<script type="text/javascript" src="search/index-1.js"></script>
<script type="text/javascript" src="search/index-2.js"></script>
<script type="text/javascript" src="search/index-3.js"></script>
<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript" src="common/main.js"></script>
</head>
<body>
<div id="header"><img id="webhelplogo1" align="left" src='common/images/logo1.png' alt="Logo"/><img id="webhelplogo2" align="right" src='common/images/logo2.png' alt="Logo"/><div class="webhelptitle"><div class="webhelptitle1">Chapter 1.13. Advanced Tasks</div><div class="webhelptitle2">1.13.16. Creating a plug-in</div></div><div id="navheader" align="right"><table><tr><td><img src="common/images/highlight-blue.gif" alt="H" onclick="toggleHighlight()" id="showHideHighlight" title="Toggle search result highlighting" /></td><td><a id="navhead-prev" accesskey="p" href="integrate_other_systems.html"><span class="navlink-text">Prev</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-up" accesskey="u" href="pt01ch13.html"><span class="navlink-text">Up</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-next" accesskey="n" href="reference_manual.html"><span class="navlink-text">Next</span></a></td></tr></table></div></div>
<div id="leftnavigation"><div id="tabs"><ul id="tocsearchnavigation" style="display:none"><li id="tocnavigationtab"><a href="#treeDiv"><em>Contents</em></a></li><li id="searchnavigationtab"><a href="#searchDiv"><em>Search</em></a></li></ul><div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none;"><div id="treenavigationtitle" style="display:none;">Contents</div><ul id="tree" class="filetree"><li><span class="file"><a href="basic_concepts_terms.html">Installation and basic concepts</a></span><ul><li><span class="file"><a href="intro_product.html">Products</a></span></li><li><span class="file"><a href="intro_version.html">Versions</a></span></li><li><span class="file"><a href="intro_publication.html">Publications</a></span></li><li><span class="file"><a href="intro_output_configuration.html">Output Configurations</a></span></li><li><span class="file"><a href="intro_translation.html">Translation Mode</a></span></li></ul></li><li><span class="file"><a href="tut_create_product.html">Creating a new product</a></span></li><li><span class="file"><a href="tut_content_styles.html">Creating content and styles</a></span><ul><li><span class="file"><a href="tut_sect_para.html">Sections, paragraphs and predefined styles</a></span></li><li><span class="file"><a href="tut_lists.html">Lists</a></span></li><li><span class="file"><a href="tut_tables.html">Tables</a></span></li><li><span class="file"><a href="tut_images.html">Images</a></span></li><li><span class="file"><a href="tut_user_styles.html">User-defined styles</a></span></li></ul></li><li><span class="file"><a href="linking_content.html">Linking content</a></span><ul><li><span class="file"><a href="ref_sections.html">Referencing sections</a></span></li><li><span class="file"><a href="ref_images_tables.html">Referencing images and tables</a></span></li><li><span class="file"><a href="external_links.html">External links</a></span></li><li><span class="file"><a href="ref_files.html">Referencing files</a></span></li></ul></li><li><span class="file"><a href="tracking_progress.html">Tracking the completion status</a></span></li><li><span class="file"><a href="tut_manage_versions.html">Versions and revisions</a></span></li><li><span class="file"><a href="translate_content.html">Translating content</a></span></li><li><span class="file"><a href="tut_export_publication.html">Exporting publications</a></span><ul><li><span class="file"><a href="tut_publication_config.html">Publications</a></span></li><li><span class="file"><a href="tut_output_config.html">Output configurations</a></span></li><li><span class="file"><a href="tut_export_html.html">Export an HTML publication</a></span></li><li><span class="file"><a href="tut_export_pdf.html">Export a PDF publication</a></span></li><li><span class="file"><a href="tut_export_translation.html">Export a translated publication</a></span></li></ul></li><li><span class="file"><a href="tut_templates.html">Templates</a></span><ul><li><span class="file"><a href="tut_static_templates.html">Static Templates</a></span></li><li><span class="file"><a href="tut_dynamic_templates.html">Dynamic Templates</a></span></li></ul></li><li><span class="file"><a href="filtering_content.html">Filtering content</a></span><ul><li><span class="file"><a href="filtering_nodes.html">Node filtering</a></span></li><li><span class="file"><a href="node_variants.html">Node variants</a></span></li></ul></li><li><span class="file"><a href="inclusions.html">Inclusions</a></span><ul><li><span class="file"><a href="structural_inclusions.html">Structural inclusions</a></span></li><li><span class="file"><a href="inline_inclusions.html">Inline inclusions</a></span></li></ul></li><li><span class="file"><a href="tut_manage_users.html">Managing user accounts</a></span></li><li><span class="file"><a href="pt01ch13.html">Advanced Tasks</a></span><ul><li><span class="file"><a href="styling_titlepage.html">Styling the title-page</a></span></li><li><span class="file"><a href="create_coverpage.html">Creating a cover-page</a></span></li><li><span class="file"><a href="adapt_page_design.html">Adapting the PDF page design</a></span><ul><li><span class="file"><a href="tut_set_page_margins.html">Setting the page margins</a></span></li><li><span class="file"><a href="pt01ch13s03s02.html">Styling the chapter header</a></span></li><li><span class="file"><a href="pt01ch13s03s03.html">Defining the header/footer content</a></span></li><li><span class="file"><a href="pt01ch13s03s04.html">Styling the header and footer</a></span></li></ul></li><li><span class="file"><a href="gentext_settings.html">Gentext settings</a></span></li><li><span class="file"><a href="inter_publication_links.html">Inter-publication links</a></span></li><li><span class="file"><a href="create_index_entries.html">Creating index entries</a></span></li><li><span class="file"><a href="create_footnotes.html">Creating footnotes</a></span></li><li><span class="file"><a href="labeled_blocks.html">Labeled blocks</a></span></li><li><span class="file"><a href="line_numbering.html">Formatting of listings</a></span></li><li><span class="file"><a href="syntax_highlighting.html">Syntax highlighting</a></span></li><li><span class="file"><a href="tut_html_preview_images.html">Creating HTML preview images</a></span></li><li><span class="file"><a href="customize_webhelp.html">Customizing the Web-Help design</a></span></li><li><span class="file"><a href="webhelp_create_layout.html">Creating a new Web-Help layout</a></span></li><li><span class="file"><a href="export_import_nodes.html">Export, import and migration</a></span></li><li><span class="file"><a href="integrate_other_systems.html">Integration with other systems</a></span></li><li id="webhelp-currentid"><span class="file"><a href="create_plugin.html">Creating a plug-in</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="startWebHelpSearch(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><div align="center"><input id="textToSearch" name="textToSearch" type="text" class="searchText"/>&nbsp;<input onclick="startWebHelpSearch(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></div></fieldset></form></div><div id="closeSearchResults" style="display:none"><a href="javascript:closeSearchShowToc();">Contents</a></div><div id="searchResults"><div align="center"></div></div></div></div></div>
<div id="bookpartsnavigation"><ul><li class="book-currentpart"><a href="pt01.html">Tutorial</a></li><li><a href="reference_manual.html">Reference Manual</a></li></ul></div>
<div id="breadcrumbsnavigation" class="breadcrumbs"><span class="breadcrumb-link"><a class="breadcrumb_node" href="pt01.html">Tutorial</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb-link"><a class="breadcrumb_node" href="pt01ch13.html">Advanced Tasks</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb_node breadcrumb_lastnode">Creating a plug-in</span></div>
<div id="content"><div id="create_plugin" class="section"><h3>1.13.16. Creating a plug-in</h3><div title="Creating a plug-in" class="doc-content"><div class="normal-para">The simplest kind of Docmenta plug-in is a plug-in that just adds some library- or JSP-files to the web application directory. A plug-in package is a zip-file containing a specifc sub-directory structure and two property-files that define the meta-data of the plug-in.</div>
<div class="normal-para">As an example, our plug-in shall add following files to the Docmenta web-application directory:</div>
<ul>
<li><span class="code">my_help.html</span></li>
<li><span class="code">my_page.jsp</span></li>
<li><span class="code">my_lib.jar</span></li>
</ul>
<div class="normal-para">The html and jsp files shall be placed in the sub-folder <span class="code">plugins/my_plugin</span>. The jar file shall be placed in the sub-folder <span class="code">WEB-INF/lib</span>.</div>
<div class="normal-para">First of all, we create a new directory, e.g. named "<span class="code">plugin-files</span>". The content of this directory will be the final content of our zip-file. Within this directory we create two text files, one with name "<span class="code">plugin.properties</span>" and one with name "<span class="code">locale.properties</span>". These two files are required for every Docmenta plug-in. The file "<span class="code">plugin.properties</span>" contains the plugin-metadata. The file "<span class="code">locale.properties</span>" contains language dependent data. Both files have to obey the rules of the Java properties file format.</div>
<div class="normal-para">In our example, the content of the <span class="code">plugin.properties</span> file could be as follows:</div>
<div title="plugin.properties" class="formal-block"><div class="formal-contents"><div title="plugin.properties" class="_formal_code_listing"><p class="listing_properties">id = my_plugin<br    />version = 1<br    />required_app_version = 1.6<br    />show_license = false<br    />load_type = immediate<br    /></p></div></div><p class="title">Listing 1.13.2. plugin.properties</p></div>
<div class="normal-para">Following table gives a short description of the properties that can be set in the <span class="code">plugin.properties</span> file:</div>
<table style="border-color: #000000; border-width: 2px; width: 100%; border-style: solid;" cellpadding="4" class="keep_together_auto" border="2" cellspacing="0" rules="rows">
<tbody>
<tr><th style="width: 33%;">Property</th><th>Description</th></tr>
<tr>
<td><span class="code">id</span></td>
<td>An identifier that uniquely identifies the plug-in.</td>
</tr>
<tr>
<td><span class="code">version</span></td>
<td>The version number of the plug-in, e.g. "2.0".</td>
</tr>
<tr>
<td><span class="code">required_app_version</span></td>
<td>The minimum Docmenta version that is required.</td>
</tr>
<tr>
<td><span class="code">show_license</span></td>
<td>Whether to show a license agreement on installation of the plug-in or not. If this is set to "<span class="code">true</span>", then a sub-folder named "<span class="code">license</span>" has to exist in the plugin-package. The folder has to contain the agreement as a XHTML file named <span class="code">license.xhtml</span>. Localized versions of the license agreement can be provided by using the filename <span class="code">license_<em>xx</em>.xhtml</span>, where <em><span class="code">xx</span></em> denotes a two-letter language code.</td>
</tr>
<tr>
<td><span class="code">load_type</span></td>
<td>This property defines whether the plug-in shall be loaded immediately (after the plug-in has been installed), or the loading shall be deferred to the next server startup. Possible values are "<span class="code">immediate</span>" and "<span class="code">next_startup</span>". If the plug-in depends on jar files that are part of the plug-in package, then the load-type has to be set to "<span class="code">next_startup</span>", because libraries that are added to the <span class="code">WEB-INF/lib</span> folder during installation are not loaded until next server startup.</td>
</tr>
</tbody>
</table>
<div class="normal-para">Following an example of the <span class="code">locale.properties</span> file:</div>
<div title="locale.properties" class="formal-block"><div class="formal-contents"><div title="locale.properties" class="_formal_code_listing"><p class="listing_properties">my_plugin.description = My example plug-in.<br    />my_plugin.help_url = plugins/my_plugin/my_help.html<br    /></p></div></div><p class="title">Listing 1.13.3. locale.properties</p></div>
<div class="normal-para">At least the property with name <span class="code"><em>plugin_id</em>.description</span> has to be provided, where <em><span class="code">plugin_id</span></em> is the id of the plug-in as defined in the <span class="code">plugin.properties</span> file (here: "<span class="code">my_plugin</span>"). This property defines a descriptive name of the plug-in. This name is displayed in the user-interface. Optionally, a property named <span class="code"><em>plugin_id</em>.help_url</span> can be used to provide a link to online-help for the plug-in.</div>
<div class="normal-para">The content of the <span class="code">locale.properties</span> file can be localized by creating files with name <span class="code">locale_<em>xx</em>.properties</span>, where <em><span class="code">xx</span></em> is a two-letter language code. For example, if the user has set its GUI language to Spanish (language code "es"), then the values from the file <span class="code">locale_es.properties</span> are used. If such a file does not exist, then the default values from <span class="code">locale.properties</span> are used. Note, that currently only English is supported as GUI language.</div>
<div class="normal-para">Now that we have created the metadata files, we can place the actual plug-in files into the package directory. First we create a sub-folder named "<span class="code">web</span>". On installation of a plug-in, all content in the "<span class="code">web</span>" folder is copied into the Docmenta web-application directory. Therefore, to get the directory structure as mentioned above, we create a sub-folder named "<span class="code">plugins</span>" inside of the "<span class="code">web</span>" folder. In the created "<span class="code">plugins</span>" folder we create a sub-folder named "<span class="code">my_plugin</span>". Next we copy the jsp and html files into this folder.</div>
<div class="normal-para">Finally, we create a sub-folder named "<span class="code">lib</span>" on the same level as the "<span class="code">web</span>" folder. Next we copy the <span class="code">my_lib.jar</span> file into this folder. As you may already guess, on installation of a plug-in, all content in the "<span class="code">lib</span>" folder is copied into the "<span class="code">WEB-INF/lib</span>" folder of the Docmenta web-application.</div>
<div class="normal-para">To summarize, the content of our package-directory is now as follows:</div>
<div class="normal-para"><div title="Example plug-in structure" class="figure"><div class="mediaobject"><img title="Example plug-in structure" alt="" src="images/plugin_example_folder_structure.gif"     /></div><p class="title">Figure 1.13.95. Example plug-in structure</p></div></div>
<div class="normal-para">Instead of creating a "<span class="code">lib</span>" folder on the same level as the "<span class="code">web</span>" folder, you could also create a sub-folder named "<span class="code">WEB-INF</span>" inside of the "<span class="code">web</span>" folder and place the "<span class="code">lib</span>" folder therein.</div>
<div class="normal-para">The last step is to package the content of our "<span class="code">plugin-files</span>" directory using a zip-tool. By convention, the name of the zip-file should at least include the id of the plug-in as well as the version number, e.g. "<span class="code">my_plugin_1_0.zip</span>". The zip-file can then be installed as described in <a title="2.7.5. Installing Plug-ins" href="manage_plugins.html">Section 2.7.5, “Installing Plug-ins”</a>.</div>
<div class="normal-para">Note that on installation of a plug-in, a copy of the plug-in package is stored in the document-store directory. When a new version of Docmenta is installed, then on restart of the web-server, all plug-ins that were installed in the old version of Docmenta will be restored from the document-store directory. However, this may require a further restart of the web-server, to load libraries that have been installed as part of the restored plug-ins.</div>
</div><div title="Content" class="doc-content"><div class="header_para">
<div class="normal-para">Plug-in API-support</div>
</div>
<div class="normal-para">For upcoming versions of Docmenta a plug-in API is planned. The API shall provide the possibility to extend Docmenta by custom panels, context menu entries, content editors and Auto-Format classes. However, until now only the Auto-Format API is available. For details on the Auto-Format API see the <a href="http://www.docmenta.org/javadocs/index.html" target="_top">Auto-Format API JavaDoc</a> documentation (see also <a title="1.9.2. Dynamic Templates" href="tut_dynamic_templates.html">Section 1.9.2, “Dynamic Templates”</a>, <a title="1.13.9. Formatting of listings" href="line_numbering.html">Section 1.13.9, “Formatting of listings”</a> and <a title="1.13.10. Syntax highlighting" href="syntax_highlighting.html">Section 1.13.10, “Syntax highlighting”</a> for use cases of the Auto-Format API).</div>
<div class="normal-para">Note that as long as the plug-in API is not fully available, the existing internal API can be accessed, as described in <a title="1.13.15. Integration with other systems" href="integrate_other_systems.html">Section 1.13.15, “Integration with other systems”</a>.</div>
</div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="integrate_other_systems.html"><span class="navlink-text">Prev</span></a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="pt01ch13.html"><span class="navlink-text">Up</span></a></td><td width="40%" align="right">&#160;<a accesskey="n" href="reference_manual.html"><span class="navlink-text">Next</span></a></td></tr><tr><td width="40%" align="left" valign="top">1.13.15. Integration with other systems&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><span class="navlink-text">Home</span></a></td><td width="40%" align="right" valign="top">&#160;2. Reference Manual</td></tr></table></div>
<div class="web_footer">
<p class="align-center">&#169; 2015 - www.docmenta.org</p>
</div>
</div>
<a id="showHideButton" onclick="showHideToc();" class="pointLeft" title="Hide TOC tree">&nbsp;</a></body>
</html>
