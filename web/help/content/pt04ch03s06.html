<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- Put your custom HTML head tags here and select this file in the HTML output configuration. -->
<!-- Note: The content of this file has to be XML (XHTML). -->
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="expires" content="43200" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="Docmenta 1.9.0"/>
<title>4.3.6. Accessing content</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="home" href="index.html" title="Docmenta Tutorial and Reference"/>
<link rel="up" href="plugin_api.html" title="4.3. Plug-in API"/>
<link rel="prev" href="plugin_jsp_integration.html" title="4.3.5. JSP integration"/>
<link rel="prev" href="content_handler_plugins.html" title="4.4. Editor and viewer plug-ins"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css"/>
<link rel="stylesheet" type="text/css" href="common/css/positioning.css"/>
<script type="text/javascript">
  var treeCookieId = "treeview-1494620492863";
  var language = "en";
  var w = new Object();
  txt_filesfound = "Results";
  txt_enter_at_least_1_char = "You must enter at least one character.";
  txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
  txt_please_wait = "Please wait. Search in progress...";
  txt_results_for = "Results for: ";
</script>
<script type="text/javascript" src="common/jquery/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery.cookie.js"></script>
<script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script>
<script type="text/javascript" src="search/htmlFileList.js"></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"></script>
<script type="text/javascript" src="search/nwSearchFnt.js"></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js"></script>
<script type="text/javascript" src="search/index-1.js"></script>
<script type="text/javascript" src="search/index-2.js"></script>
<script type="text/javascript" src="search/index-3.js"></script>
<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript" src="common/main.js"></script>
</head>
<body>
<div id="header"><img id="webhelplogo1" align="left" src='common/images/logo1.png' alt="Logo"/><img id="webhelplogo2" align="right" src='common/images/logo2.png' alt="Logo"/><div class="webhelptitle"><div class="webhelptitle1">Chapter 4.3. Plug-in API</div><div class="webhelptitle2">4.3.6. Accessing content</div></div><div id="navheader" align="right"><table><tr><td><img src="common/images/highlight-blue.gif" alt="H" onclick="toggleHighlight()" id="showHideHighlight" title="Toggle search result highlighting" /></td><td><a id="navhead-prev" accesskey="p" href="plugin_jsp_integration.html"><span class="navlink-text">Prev</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-up" accesskey="u" href="plugin_api.html"><span class="navlink-text">Up</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-next" accesskey="n" href="content_handler_plugins.html"><span class="navlink-text">Next</span></a></td></tr></table></div></div>
<div id="leftnavigation"><div id="tabs"><ul id="tocsearchnavigation" style="display:none"><li id="tocnavigationtab"><a href="#treeDiv"><em>Contents</em></a></li><li id="searchnavigationtab"><a href="#searchDiv"><em>Search</em></a></li></ul><div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none;"><div id="treenavigationtitle" style="display:none;">Contents</div><ul id="tree" class="filetree"><li><span class="file"><a href="pt04ch01.html">Introduction</a></span></li><li><span class="file"><a href="create_plugin_package.html">Creating a plug-in package</a></span></li><li><span class="file"><a href="plugin_api.html">Plug-in API</a></span><ul><li><span class="file"><a href="plugin_lifecycle_methods.html">Lifecycle methods</a></span></li><li><span class="file"><a href="plugin_add_menu.html">Adding menu items</a></span></li><li><span class="file"><a href="plugin_add_dialog.html">Adding a dialog</a></span><ul><li><span class="file"><a href="plugin_plain_js_dialogs.html">Plain JavaScript Dialogs</a></span></li><li><span class="file"><a href="plugin_zk_dialogs.html">ZK Dialogs</a></span></li></ul></li><li><span class="file"><a href="plugin_add_tab.html">Adding a tab</a></span></li><li><span class="file"><a href="plugin_jsp_integration.html">JSP integration</a></span></li><li id="webhelp-currentid"><span class="file"><a href="pt04ch03s06.html">Accessing content</a></span></li></ul></li><li><span class="file"><a href="content_handler_plugins.html">Editor and viewer plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s01.html">Content Handlers</a></span></li><li><span class="file"><a href="plug_viewer.html">Viewer Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s02s01.html">initialize</a></span></li><li><span class="file"><a href="pt04ch04s02s02.html">getApplicationId</a></span></li><li><span class="file"><a href="pt04ch04s02s03.html">getApplicationName</a></span></li><li><span class="file"><a href="pt04ch04s02s04.html">getSupportedViewExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s05.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s06.html">getPreviewURL</a></span></li><li><span class="file"><a href="pt04ch04s02s07.html">openViewer</a></span></li><li><span class="file"><a href="pt04ch04s02s08.html">openEditor</a></span></li><li><span class="file"><a href="pt04ch04s02s09.html">setCharEntities</a></span></li><li><span class="file"><a href="plug_view_handler_complete.html">The complete viewer class</a></span></li><li><span class="file"><a href="pt04ch04s02s11.html">The view.jsp page</a></span></li><li><span class="file"><a href="plug_viewer_package.html">Creating the viewer plug-in</a></span></li><li><span class="file"><a href="plug_viewer_install.html">Installing the viewer plug-in</a></span></li></ul></li><li><span class="file"><a href="pt04ch04s03.html">Editor Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s03s01.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s03s02.html">openEditor</a></span></li><li><span class="file"><a href="plug_edit_handler_complete.html">The complete editor class</a></span></li><li><span class="file"><a href="pt04ch04s03s04.html">The edit.jsp page</a></span></li><li><span class="file"><a href="pt04ch04s03s05.html">Creating the editor plug-in</a></span></li></ul></li></ul></li><li><span class="file"><a href="rule_plugins.html">Rule plug-ins</a></span><ul><li><span class="file"><a href="html_rule_getShortInfo.html">getShortInfo</a></span></li><li><span class="file"><a href="pt04ch05s02.html">getLongInfo</a></span></li><li><span class="file"><a href="pt04ch05s03.html">getCheckIds</a></span></li><li><span class="file"><a href="pt04ch05s04.html">getCheckTitle</a></span></li><li><span class="file"><a href="pt04ch05s05.html">supportsAutoCorrection</a></span></li><li><span class="file"><a href="pt04ch05s06.html">getDefaultLogLevel</a></span></li><li><span class="file"><a href="pt04ch05s07.html">configure</a></span></li><li><span class="file"><a href="pt04ch05s08.html">startBatch</a></span></li><li><span class="file"><a href="pt04ch05s09.html">finishBatch</a></span></li><li><span class="file"><a href="html_rule_apply.html">apply</a></span></li><li><span class="file"><a href="my_html_rule_complete.html">The complete example</a></span></li><li><span class="file"><a href="pt04ch05s12.html">Creating the Rule Plug-in</a></span></li></ul></li><li><span class="file"><a href="autoformat_plugins.html">AutoFormat plug-ins</a></span><ul><li><span class="file"><a href="pt04ch06s01.html">AutoFormat Transformations</a></span></li><li><span class="file"><a href="pt04ch06s02.html">AutoFormat Example</a></span></li><li><span class="file"><a href="pt04ch06s03.html">Creating an AutoFormat Plug-in</a></span></li></ul></li><li><span class="file"><a href="output_plugins.html">Output plug-ins</a></span></li><li><span class="file"><a href="customize_pdf_stylesheet.html">PDF stylesheet customization</a></span><ul><li><span class="file"><a href="customize_docbook_transformation.html">Customizing the transformation to DocBook</a></span></li><li><span class="file"><a href="pt04ch08s02.html">Customizing the DocBook stylesheets</a></span></li><li><span class="file"><a href="pt04ch08s03.html">Creating the stylesheet plug-in</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="startWebHelpSearch(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><div align="center"><input id="textToSearch" name="textToSearch" type="text" class="searchText"/>&nbsp;<input onclick="startWebHelpSearch(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></div></fieldset></form></div><div id="closeSearchResults" style="display:none"><a href="javascript:closeSearchShowToc();">Contents</a></div><div id="searchResults"><div align="center"></div></div></div></div></div>
<div id="bookpartsnavigation"><ul><li><a href="tutorial.html">Tutorial</a></li><li><a href="reference_manual.html">User Manual</a></li><li><a href="xhtml_reference.html">XHTML Reference</a></li><li class="book-currentpart"><a href="plugin_developer_guide.html">Plug-in Developer Guide</a></li></ul></div>
<div id="breadcrumbsnavigation" class="breadcrumbs"><span class="breadcrumb-link"><a class="breadcrumb_node" href="plugin_developer_guide.html">Plug-in Developer Guide</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb-link"><a class="breadcrumb_node" href="plugin_api.html">Plug-in API</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb_node breadcrumb_lastnode">Accessing content</span></div>
<div id="content"><div id="comp00000023" class="section"><h3>4.3.6. Accessing content</h3><div title="Content" class="doc-content"><div class="normal-para">To show the principle of accessing data stored in a product, we implement a plug-in that allows a user to replace the obsolete <span class="code">&lt;center&gt;</span> tag by the <span class="code">&lt;div&gt;</span> tag for a selected node. To provide this functionality a new menu item named "Replace &lt;center&gt;" shall be available in the "Extra" sub-menu. When the user clicks this menu item, the content of the selected node shall be processed. If the content contains one or more <span class="code">&lt;center&gt;...&lt;/center&gt;</span> tags, then these tags shall be replaced by <span class="code">&lt;div class="centered"&gt;...&lt;/div&gt;</span> tags. Following plug-in realizes this functionality:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div><div class="listing_line">8 
</div><div class="listing_line">9 
</div><div class="listing_line">10 
</div><div class="listing_line">11 
</div><div class="listing_line">12 
</div><div class="listing_line">13 
</div><div class="listing_line">14 
</div><div class="marked_line_num">15 
</div><div class="listing_line">16 
</div><div class="listing_line">17 
</div><div class="listing_line">18 
</div><div class="listing_line">19 
</div><div class="listing_line">20 
</div><div class="listing_line">21 
</div><div class="listing_line">22 
</div><div class="listing_line">23 
</div><div class="listing_line">24 
</div><div class="listing_line">25 
</div><div class="listing_line">26 
</div><div class="listing_line">27 
</div><div class="listing_line">28 
</div><div class="listing_line">29 
</div><div class="listing_line">30 
</div><div class="marked_line_num">31 
</div><div class="marked_line_num">32 
</div><div class="marked_line_num">33 
</div><div class="marked_line_num">34 
</div><div class="listing_line">35 
</div><div class="listing_line">36 
</div><div class="listing_line">37 
</div><div class="marked_line_num">38 
</div><div class="marked_line_num">39 
</div><div class="marked_line_num">40 
</div><div class="marked_line_num">41 
</div><div class="marked_line_num">42 
</div><div class="marked_line_num">43 
</div><div class="marked_line_num">44 
</div><div class="marked_line_num">45 
</div><div class="marked_line_num">46 
</div><div class="marked_line_num">47 
</div><div class="marked_line_num">48 
</div><div class="marked_line_num">49 
</div><div class="marked_line_num">50 
</div><div class="listing_line">51 
</div></td><td valign="top" class="listing_java"><div class="listing_line"><span class="code_keyword">package</span> myexample;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.*;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.web.*;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">public class</span> ReplaceCenterPlugin <span class="code_keyword">extends</span> DefaultWebPlugin 
</div><div class="listing_line">                                 <span class="code_keyword">implements</span> UIListener {
</div><div class="listing_line"> 
</div><div class="listing_line">    <span class="code_keyword">private final</span> String my_item_id = <span class="code_char">"my_plugin_menu_item"</span>;
</div><div class="listing_line">    
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> onInitMainWindow(WebPluginContext ctx, 
</div><div class="listing_line">                                 WebUserSession webSess) 
</div><div class="listing_line">    {
</div><div class="listing_line_marked">        String item_label = webSess.getLabel(<span class="code_char">"my_plugin.replace_center"</span>);<span class="code_comment"></span>
</div><div class="listing_line">        String icon_url = <span class="code_char">"plugins/my_plugin/images/my_icon.png"</span>;
</div><div class="listing_line">        webSess.addMenuItem(ctx, <span class="code_char">"treemenuExtra"</span>, my_item_id, 
</div><div class="listing_line">                            item_label, icon_url, <span class="code_keyword">null</span>, <span class="code_keyword">false</span>);
</div><div class="listing_line">        webSess.setUIListener(ctx, <span class="code_keyword">this</span>);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> onEvent(UIEvent evt) 
</div><div class="listing_line">    {
</div><div class="listing_line">        WebUserSession webSess = evt.getSession();
</div><div class="listing_line">        String targetId = evt.getTargetId();
</div><div class="listing_line">        <span class="code_keyword">if</span> ((<span class="code_char">"treemenu"</span>.equals(targetId)) &amp;&amp; evt.isOpen()) {
</div><div class="listing_line">            <span class="code_keyword">int</span> cnt = webSess.selectedNodesCount();
</div><div class="listing_line">            webSess.setMenuDisabled(my_item_id, cnt != <span class="code_literal">1</span>);
</div><div class="listing_line">        } <span class="code_keyword">else if</span> (my_item_id.equals(targetId) &amp;&amp; evt.isClick()) {
</div><div class="listing_line_marked">            Node nd = webSess.getSingleSelectedNode(<span class="code_keyword">true</span>); <span class="code_comment"></span>
</div><div class="listing_line_marked">            <span class="code_keyword">if</span> (nd <span class="code_keyword">instanceof</span> PubContent) {                <span class="code_comment"></span>
</div><div class="listing_line_marked">                replaceCenter((PubContent) nd);            <span class="code_comment"></span>
</div><div class="listing_line_marked">            }                                              <span class="code_comment"></span>
</div><div class="listing_line">        }
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line_marked">    <span class="code_keyword">private void</span> replaceCenter(PubContent cont)    <span class="code_comment"></span>
</div><div class="listing_line_marked">    {                                              <span class="code_comment"></span>
</div><div class="listing_line_marked">        String html_old = cont.getContentString(); <span class="code_comment"></span>
</div><div class="listing_line_marked">        String html_new = html_old.                <span class="code_comment"></span>
</div><div class="listing_line_marked">          replaceAll(<span class="code_char">"&lt;center[^&gt;]*&gt;"</span>,              <span class="code_comment"></span>
</div><div class="listing_line_marked">                     <span class="code_char">"&lt;div class=\"</span>centered\<span class="code_char">"&gt;"</span>).  <span class="code_comment"></span>
</div><div class="listing_line_marked">          replaceAll(<span class="code_char">"&lt;/center&gt;"</span>,                  <span class="code_comment"></span>
</div><div class="listing_line_marked">                     <span class="code_char">"&lt;/div&gt;"</span>);                    <span class="code_comment"></span>
</div><div class="listing_line_marked">        <span class="code_keyword">if</span> (! html_new.equals(html_old)) {         <span class="code_comment"></span>
</div><div class="listing_line_marked">            cont.makeRevision();                   <span class="code_comment"></span>
</div><div class="listing_line_marked">            cont.setContentString(html_new);       <span class="code_comment"></span>
</div><div class="listing_line_marked">        }                                          <span class="code_comment"></span>
</div><div class="listing_line_marked">    }                                              <span class="code_comment"></span>
</div><div class="listing_line">}
</div></td></tr></table></div></div><p class="title">Listing 4.3.22. </p></div>
<div class="normal-para">The plug-in shown above is similar to the <em>Hello World</em> plugin-in described in <a href="plugin_add_menu.html" title="4.3.2. Adding menu items">Section 4.3.2, “Adding menu items”</a> . The lines in the listing above that differ from the <em>Hello World</em> plug-in are highlighted. The <span class="code">onInitMainWindow</span> method is identical, except that the label identifier for the menu item has been changed to <span class="code">"my_plugin.replace_center"</span>. As a consequence, the <span class="code">locale.properties</span> file has to be adapted to contain following line:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><p class="listing_properties">my_plugin.replace_center = Replace &lt;center&gt;</p></div></div><p class="title">Listing 4.3.23. </p></div>
<div class="normal-para">The main functionality is in the <span class="code">onEvent</span> method. If a click event is detected and only a single node is selected, then the currently selected node is retrieved by the line</div>
<div class="normal-para java_no_line_nums">Node nd = webSess.getSingleSelectedNode(<span class="code_keyword">true</span>);</div>
<div class="normal-para">The argument <span class="code">true</span> specifies that an error message shall be displayed in case no single node is selected. The next line checks whether the returned node implements the <span class="code">org.docma.plugin.PubContent</span> interface. In Docmenta all XHTML content nodes implement this interface. This way it is possible to distinguish XHTML content nodes from other nodes (for example image or folder nodes). If the node is an XHTML content node, then the line</div>
<div class="normal-para java_no_line_nums">String html_old = cont.getContentString();</div>
<div class="normal-para">retrieves the XHTML content of the node and stores it in the variable <span class="code">html_old</span>. The next statement searches in the variable <span class="code">html_old</span> for all occurences of <span class="code">&lt;center …&gt;</span> and replaces them by <span class="code">&lt;div class="centered"&gt;</span>. Additionally, all occurences of the closing <span class="code">&lt;/center&gt;</span> tag are replaced by <span class="code">&lt;/div&gt;</span>. The result is stored in the variable <span class="code">html_new</span>. Note that if <span class="code">html_old</span> contains no <span class="code">&lt;center&gt;</span> tags, then <span class="code">html_new</span> is identical to <span class="code">html_old</span>. In this case nothing is done. Otherwise the lines</div>
<div class="normal-para java_no_line_nums">cont.makeRevision();<br    />cont.setContentString(html_new);</div>
<div class="normal-para">create a new revision of the content and assign the modified content to the node.</div>
<div class="normal-para">You can install the plug-in and test it by choosing the added menu item from the context menu of a selected content node. If the content node contains a <span class="code">&lt;center&gt;</span> tag, it will be replaced by the <span class="code">&lt;div class="centered"&gt;</span> tag. To define the formatting of these <span class="code">&lt;div&gt;</span> blocks, you have to create a style with ID <span class="code">"centered"</span> and assign CSS properties to it.</div>
<div class="normal-para">We can further improve the plug-in by allowing selection of multiple nodes. As you might guess, the method <span class="code">getSingleSelectedNode</span>, which is used in the listing above, is only suitable to retrieve a single selected node. If more than one node is selected by the user, this method returns <span class="code">null</span> (and if the argument <span class="code">true</span> is passed, an error message is shown). To retrieve multiple selected nodes, the method <span class="code">getSelectedSiblingNodes</span> has to be used instead. Furthermore, the menu item should only be disabled in case not all selected nodes are XHTML content nodes.</div>
<div class="normal-para">All this can be achieved by changing the <span class="code">onEvent</span> method as follows:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">23 
</div><div class="listing_line">24 
</div><div class="listing_line">25 
</div><div class="listing_line">26 
</div><div class="listing_line">27 
</div><div class="marked_line_num">28 
</div><div class="marked_line_num">29 
</div><div class="marked_line_num">30 
</div><div class="marked_line_num">31 
</div><div class="marked_line_num">32 
</div><div class="marked_line_num">33 
</div><div class="marked_line_num">34 
</div><div class="marked_line_num">35 
</div><div class="marked_line_num">36 
</div><div class="marked_line_num">37 
</div><div class="marked_line_num">38 
</div><div class="listing_line">39 
</div><div class="marked_line_num">40 
</div><div class="marked_line_num">41 
</div><div class="marked_line_num">42 
</div><div class="marked_line_num">43 
</div><div class="marked_line_num">44 
</div><div class="marked_line_num">45 
</div><div class="marked_line_num">46 
</div><div class="marked_line_num">47 
</div><div class="listing_line">48 
</div><div class="listing_line">49 
</div></td><td valign="top" class="listing_java"><div class="listing_line">    <span class="code_keyword">public void</span> onEvent(UIEvent evt) 
</div><div class="listing_line">    {
</div><div class="listing_line">        WebUserSession webSess = evt.getSession();
</div><div class="listing_line">        String targetId = evt.getTargetId();
</div><div class="listing_line">        <span class="code_keyword">if</span> ((<span class="code_char">"treemenu"</span>.equals(targetId)) &amp;&amp; evt.isOpen()) {
</div><div class="listing_line_marked">            Node[] nds = webSess.getSelectedSiblingNodes(<span class="code_keyword">true</span>);  <span class="code_comment"></span>
</div><div class="listing_line_marked">            <span class="code_keyword">boolean</span> enabled = (nds != <span class="code_keyword">null</span>) &amp;&amp; (nds.length &gt; <span class="code_literal">0</span>); <span class="code_comment"></span>
</div><div class="listing_line_marked">            <span class="code_keyword">if</span> (nds != <span class="code_keyword">null</span>) {                                   <span class="code_comment"></span>
</div><div class="listing_line_marked">                <span class="code_keyword">for</span> (Node nd : nds) {                            <span class="code_comment"></span>
</div><div class="listing_line_marked">                    <span class="code_keyword">if</span> (! (nd <span class="code_keyword">instanceof</span> PubContent)) {          <span class="code_comment"></span>
</div><div class="listing_line_marked">                        enabled = <span class="code_keyword">false</span>;                         <span class="code_comment"></span>
</div><div class="listing_line_marked">                        <span class="code_keyword">break</span>;                                   <span class="code_comment"></span>
</div><div class="listing_line_marked">                    }                                            <span class="code_comment"></span>
</div><div class="listing_line_marked">                }                                                <span class="code_comment"></span>
</div><div class="listing_line_marked">            }                                                    <span class="code_comment"></span>
</div><div class="listing_line_marked">            webSess.setMenuDisabled(my_item_id, enabled);        <span class="code_comment"></span>
</div><div class="listing_line">        } <span class="code_keyword">else if</span> (my_item_id.equals(targetId) &amp;&amp; evt.isClick()) {
</div><div class="listing_line_marked">            Node[] nds = webSess.getSelectedSiblingNodes(<span class="code_keyword">true</span>); <span class="code_comment"></span>
</div><div class="listing_line_marked">            <span class="code_keyword">if</span> (nds != <span class="code_keyword">null</span>) {                                  <span class="code_comment"></span>
</div><div class="listing_line_marked">                <span class="code_keyword">for</span> (Node nd : nds) {                           <span class="code_comment"></span>
</div><div class="listing_line_marked">                    <span class="code_keyword">if</span> (nd <span class="code_keyword">instanceof</span> PubContent) {             <span class="code_comment"></span>
</div><div class="listing_line_marked">                        replaceCenter((PubContent) nd);         <span class="code_comment"></span>
</div><div class="listing_line_marked">                    }                                           <span class="code_comment"></span>
</div><div class="listing_line_marked">                }                                               <span class="code_comment"></span>
</div><div class="listing_line_marked">            }                                                   <span class="code_comment"></span>
</div><div class="listing_line">        }
</div><div class="listing_line">    }
</div></td></tr></table></div></div><p class="title">Listing 4.3.24. </p></div>
<div class="normal-para">Be aware that the method <span class="code">getSelectedSiblingNodes</span> only allows selection of nodes that have the same parent node. Otherwise this method returns <span class="code">null</span> (and if the argument <span class="code">true</span> is passed, an error message is shown).</div>
</div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="plugin_jsp_integration.html"><span class="navlink-text">Prev</span></a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="plugin_api.html"><span class="navlink-text">Up</span></a></td><td width="40%" align="right">&#160;<a accesskey="n" href="content_handler_plugins.html"><span class="navlink-text">Next</span></a></td></tr><tr><td width="40%" align="left" valign="top">4.3.5. JSP integration&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><span class="navlink-text">Home</span></a></td><td width="40%" align="right" valign="top">&#160;4.4. Editor and viewer plug-ins</td></tr></table></div>
<div class="web_footer">
<p class="align-center">&#169; 2017 - www.docmenta.org</p>
</div>
</div>
<a id="showHideButton" onclick="showHideToc();" class="pointLeft" title="Hide TOC tree">&nbsp;</a></body>
</html>
