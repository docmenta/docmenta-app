<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- Put your custom HTML head tags here and select this file in the HTML output configuration. -->
<!-- Note: The content of this file has to be XML (XHTML). -->
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="expires" content="43200" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="Docmenta 1.9.0"/>
<title>4.5.11. The complete example</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="home" href="index.html" title="Docmenta Tutorial and Reference"/>
<link rel="up" href="rule_plugins.html" title="4.5. Rule plug-ins"/>
<link rel="prev" href="html_rule_apply.html" title="4.5.10. apply"/>
<link rel="prev" href="pt04ch05s12.html" title="4.5.12. Creating the Rule Plug-in"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css"/>
<link rel="stylesheet" type="text/css" href="common/css/positioning.css"/>
<script type="text/javascript">
  var treeCookieId = "treeview-1494620492899";
  var language = "en";
  var w = new Object();
  txt_filesfound = "Results";
  txt_enter_at_least_1_char = "You must enter at least one character.";
  txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
  txt_please_wait = "Please wait. Search in progress...";
  txt_results_for = "Results for: ";
</script>
<script type="text/javascript" src="common/jquery/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery.cookie.js"></script>
<script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script>
<script type="text/javascript" src="search/htmlFileList.js"></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"></script>
<script type="text/javascript" src="search/nwSearchFnt.js"></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js"></script>
<script type="text/javascript" src="search/index-1.js"></script>
<script type="text/javascript" src="search/index-2.js"></script>
<script type="text/javascript" src="search/index-3.js"></script>
<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript" src="common/main.js"></script>
</head>
<body>
<div id="header"><img id="webhelplogo1" align="left" src='common/images/logo1.png' alt="Logo"/><img id="webhelplogo2" align="right" src='common/images/logo2.png' alt="Logo"/><div class="webhelptitle"><div class="webhelptitle1">Chapter 4.5. Rule plug-ins</div><div class="webhelptitle2">4.5.11. The complete example</div></div><div id="navheader" align="right"><table><tr><td><img src="common/images/highlight-blue.gif" alt="H" onclick="toggleHighlight()" id="showHideHighlight" title="Toggle search result highlighting" /></td><td><a id="navhead-prev" accesskey="p" href="html_rule_apply.html"><span class="navlink-text">Prev</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-up" accesskey="u" href="rule_plugins.html"><span class="navlink-text">Up</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-next" accesskey="n" href="pt04ch05s12.html"><span class="navlink-text">Next</span></a></td></tr></table></div></div>
<div id="leftnavigation"><div id="tabs"><ul id="tocsearchnavigation" style="display:none"><li id="tocnavigationtab"><a href="#treeDiv"><em>Contents</em></a></li><li id="searchnavigationtab"><a href="#searchDiv"><em>Search</em></a></li></ul><div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none;"><div id="treenavigationtitle" style="display:none;">Contents</div><ul id="tree" class="filetree"><li><span class="file"><a href="pt04ch01.html">Introduction</a></span></li><li><span class="file"><a href="create_plugin_package.html">Creating a plug-in package</a></span></li><li><span class="file"><a href="plugin_api.html">Plug-in API</a></span><ul><li><span class="file"><a href="plugin_lifecycle_methods.html">Lifecycle methods</a></span></li><li><span class="file"><a href="plugin_add_menu.html">Adding menu items</a></span></li><li><span class="file"><a href="plugin_add_dialog.html">Adding a dialog</a></span><ul><li><span class="file"><a href="plugin_plain_js_dialogs.html">Plain JavaScript Dialogs</a></span></li><li><span class="file"><a href="plugin_zk_dialogs.html">ZK Dialogs</a></span></li></ul></li><li><span class="file"><a href="plugin_add_tab.html">Adding a tab</a></span></li><li><span class="file"><a href="plugin_jsp_integration.html">JSP integration</a></span></li><li><span class="file"><a href="pt04ch03s06.html">Accessing content</a></span></li></ul></li><li><span class="file"><a href="content_handler_plugins.html">Editor and viewer plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s01.html">Content Handlers</a></span></li><li><span class="file"><a href="plug_viewer.html">Viewer Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s02s01.html">initialize</a></span></li><li><span class="file"><a href="pt04ch04s02s02.html">getApplicationId</a></span></li><li><span class="file"><a href="pt04ch04s02s03.html">getApplicationName</a></span></li><li><span class="file"><a href="pt04ch04s02s04.html">getSupportedViewExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s05.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s06.html">getPreviewURL</a></span></li><li><span class="file"><a href="pt04ch04s02s07.html">openViewer</a></span></li><li><span class="file"><a href="pt04ch04s02s08.html">openEditor</a></span></li><li><span class="file"><a href="pt04ch04s02s09.html">setCharEntities</a></span></li><li><span class="file"><a href="plug_view_handler_complete.html">The complete viewer class</a></span></li><li><span class="file"><a href="pt04ch04s02s11.html">The view.jsp page</a></span></li><li><span class="file"><a href="plug_viewer_package.html">Creating the viewer plug-in</a></span></li><li><span class="file"><a href="plug_viewer_install.html">Installing the viewer plug-in</a></span></li></ul></li><li><span class="file"><a href="pt04ch04s03.html">Editor Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s03s01.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s03s02.html">openEditor</a></span></li><li><span class="file"><a href="plug_edit_handler_complete.html">The complete editor class</a></span></li><li><span class="file"><a href="pt04ch04s03s04.html">The edit.jsp page</a></span></li><li><span class="file"><a href="pt04ch04s03s05.html">Creating the editor plug-in</a></span></li></ul></li></ul></li><li><span class="file"><a href="rule_plugins.html">Rule plug-ins</a></span><ul><li><span class="file"><a href="html_rule_getShortInfo.html">getShortInfo</a></span></li><li><span class="file"><a href="pt04ch05s02.html">getLongInfo</a></span></li><li><span class="file"><a href="pt04ch05s03.html">getCheckIds</a></span></li><li><span class="file"><a href="pt04ch05s04.html">getCheckTitle</a></span></li><li><span class="file"><a href="pt04ch05s05.html">supportsAutoCorrection</a></span></li><li><span class="file"><a href="pt04ch05s06.html">getDefaultLogLevel</a></span></li><li><span class="file"><a href="pt04ch05s07.html">configure</a></span></li><li><span class="file"><a href="pt04ch05s08.html">startBatch</a></span></li><li><span class="file"><a href="pt04ch05s09.html">finishBatch</a></span></li><li><span class="file"><a href="html_rule_apply.html">apply</a></span></li><li id="webhelp-currentid"><span class="file"><a href="my_html_rule_complete.html">The complete example</a></span></li><li><span class="file"><a href="pt04ch05s12.html">Creating the Rule Plug-in</a></span></li></ul></li><li><span class="file"><a href="autoformat_plugins.html">AutoFormat plug-ins</a></span><ul><li><span class="file"><a href="pt04ch06s01.html">AutoFormat Transformations</a></span></li><li><span class="file"><a href="pt04ch06s02.html">AutoFormat Example</a></span></li><li><span class="file"><a href="pt04ch06s03.html">Creating an AutoFormat Plug-in</a></span></li></ul></li><li><span class="file"><a href="output_plugins.html">Output plug-ins</a></span></li><li><span class="file"><a href="customize_pdf_stylesheet.html">PDF stylesheet customization</a></span><ul><li><span class="file"><a href="customize_docbook_transformation.html">Customizing the transformation to DocBook</a></span></li><li><span class="file"><a href="pt04ch08s02.html">Customizing the DocBook stylesheets</a></span></li><li><span class="file"><a href="pt04ch08s03.html">Creating the stylesheet plug-in</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="startWebHelpSearch(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><div align="center"><input id="textToSearch" name="textToSearch" type="text" class="searchText"/>&nbsp;<input onclick="startWebHelpSearch(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></div></fieldset></form></div><div id="closeSearchResults" style="display:none"><a href="javascript:closeSearchShowToc();">Contents</a></div><div id="searchResults"><div align="center"></div></div></div></div></div>
<div id="bookpartsnavigation"><ul><li><a href="tutorial.html">Tutorial</a></li><li><a href="reference_manual.html">User Manual</a></li><li><a href="xhtml_reference.html">XHTML Reference</a></li><li class="book-currentpart"><a href="plugin_developer_guide.html">Plug-in Developer Guide</a></li></ul></div>
<div id="breadcrumbsnavigation" class="breadcrumbs"><span class="breadcrumb-link"><a class="breadcrumb_node" href="plugin_developer_guide.html">Plug-in Developer Guide</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb-link"><a class="breadcrumb_node" href="rule_plugins.html">Rule plug-ins</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb_node breadcrumb_lastnode">The complete example</span></div>
<div id="content"><div id="my_html_rule_complete" class="section"><h3>4.5.11. The complete example</h3><div title="Complete source" class="doc-content"><div class="normal-para">Following the complete source of the Java class <span class="code">myexample.MyHTMLRule</span>:</div>
<div title="MyHTMLRule.java" class="formal-block"><div class="formal-contents"><div title="MyHTMLRule.java" class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div><div class="listing_line">8 
</div><div class="listing_line">9 
</div><div class="listing_line">10 
</div><div class="listing_line">11 
</div><div class="listing_line">12 
</div><div class="listing_line">13 
</div><div class="listing_line">14 
</div><div class="listing_line">15 
</div><div class="listing_line">16 
</div><div class="listing_line">17 
</div><div class="listing_line">18 
</div><div class="listing_line">19 
</div><div class="listing_line">20 
</div><div class="listing_line">21 
</div><div class="listing_line">22 
</div><div class="listing_line">23 
</div><div class="listing_line">24 
</div><div class="listing_line">25 
</div><div class="listing_line">26 
</div><div class="listing_line">27 
</div><div class="listing_line">28 
</div><div class="listing_line">29 
</div><div class="listing_line">30 
</div><div class="listing_line">31 
</div><div class="listing_line">32 
</div><div class="listing_line">33 
</div><div class="listing_line">34 
</div><div class="listing_line">35 
</div><div class="listing_line">36 
</div><div class="listing_line">37 
</div><div class="listing_line">38 
</div><div class="listing_line">39 
</div><div class="listing_line">40 
</div><div class="listing_line">41 
</div><div class="listing_line">42 
</div><div class="listing_line">43 
</div><div class="listing_line">44 
</div><div class="listing_line">45 
</div><div class="listing_line">46 
</div><div class="listing_line">47 
</div><div class="listing_line">48 
</div><div class="listing_line">49 
</div><div class="listing_line">50 
</div><div class="listing_line">51 
</div><div class="listing_line">52 
</div><div class="listing_line">53 
</div><div class="listing_line">54 
</div><div class="listing_line">55 
</div><div class="listing_line">56 
</div><div class="listing_line">57 
</div><div class="listing_line">58 
</div><div class="listing_line">59 
</div><div class="listing_line">60 
</div><div class="listing_line">61 
</div><div class="listing_line">62 
</div><div class="listing_line">63 
</div><div class="listing_line">64 
</div><div class="listing_line">65 
</div><div class="listing_line">66 
</div><div class="listing_line">67 
</div><div class="listing_line">68 
</div><div class="listing_line">69 
</div><div class="listing_line">70 
</div><div class="listing_line">71 
</div><div class="listing_line">72 
</div><div class="listing_line">73 
</div><div class="listing_line">74 
</div><div class="listing_line">75 
</div><div class="listing_line">76 
</div><div class="listing_line">77 
</div><div class="listing_line">78 
</div><div class="listing_line">79 
</div><div class="listing_line">80 
</div><div class="listing_line">81 
</div><div class="listing_line">82 
</div><div class="listing_line">83 
</div><div class="listing_line">84 
</div><div class="listing_line">85 
</div><div class="listing_line">86 
</div><div class="listing_line">87 
</div><div class="listing_line">88 
</div><div class="listing_line">89 
</div><div class="listing_line">90 
</div><div class="listing_line">91 
</div><div class="listing_line">92 
</div><div class="listing_line">93 
</div><div class="listing_line">94 
</div><div class="listing_line">95 
</div><div class="listing_line">96 
</div><div class="listing_line">97 
</div><div class="listing_line">98 
</div><div class="listing_line">99 
</div><div class="listing_line">100 
</div><div class="listing_line">101 
</div><div class="listing_line">102 
</div><div class="listing_line">103 
</div><div class="listing_line">104 
</div><div class="listing_line">105 
</div><div class="listing_line">106 
</div><div class="listing_line">107 
</div><div class="listing_line">108 
</div><div class="listing_line">109 
</div><div class="listing_line">110 
</div><div class="listing_line">111 
</div><div class="listing_line">112 
</div><div class="listing_line">113 
</div><div class="listing_line">114 
</div><div class="listing_line">115 
</div><div class="listing_line">116 
</div><div class="listing_line">117 
</div><div class="listing_line">118 
</div><div class="listing_line">119 
</div><div class="listing_line">120 
</div></td><td valign="top" class="listing_java"><div class="listing_line"><span class="code_keyword">package</span> myexample;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.LogLevel;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.PluginUtil;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.rules.HTMLRule;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.rules.HTMLRuleConfig;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.rules.HTMLRuleContext;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">public class</span> MyHTMLRule <span class="code_keyword">implements</span> HTMLRule
</div><div class="listing_line">{
</div><div class="listing_line">    <span class="code_keyword">private static final</span> String CHECK_LENGTH = <span class="code_char">"check_length"</span>;
</div><div class="listing_line">    <span class="code_keyword">private static final</span> String CHECK_EMPTY_SPAN = <span class="code_char">"check_empty_span"</span>;
</div><div class="listing_line">    
</div><div class="listing_line">    <span class="code_keyword">private int</span> maxLength = Integer.MAX_VALUE;
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public</span> String getShortInfo(String languageCode) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return</span> label(languageCode, <span class="code_char">"shortInfo"</span>);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public</span> String getLongInfo(String languageCode) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return</span> label(languageCode, <span class="code_char">"longInfo"</span>);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public</span> String[] getCheckIds() 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return new</span> String[] { CHECK_LENGTH, CHECK_EMPTY_SPAN };
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public</span> String getCheckTitle(String checkId, String languageCode) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return</span> label(languageCode, checkId + <span class="code_char">".title"</span>);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public boolean</span> supportsAutoCorrection(String checkId) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return</span> checkId.equals(CHECK_EMPTY_SPAN);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public</span> LogLevel getDefaultLogLevel(String checkId) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return</span> checkId.equals(CHECK_LENGTH) ? LogLevel.WARNING 
</div><div class="listing_line">                                            : LogLevel.ERROR;
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> configure(HTMLRuleConfig conf) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">try</span> {
</div><div class="listing_line">            String a = conf.getArguments()[<span class="code_literal">0</span>];
</div><div class="listing_line">            <span class="code_keyword">if</span> (a.toLowerCase().startsWith(<span class="code_char">"maxlength"</span>)) {
</div><div class="listing_line">                maxLength = 
</div><div class="listing_line">                  Integer.parseInt(a.substring(a.indexOf(<span class="code_char">'='</span>) + <span class="code_literal">1</span>));
</div><div class="listing_line">                <span class="code_keyword">return</span>;
</div><div class="listing_line">            }
</div><div class="listing_line">        } <span class="code_keyword">catch</span> (Exception ex) {} <span class="code_comment">// no argument or invalid number </span>
</div><div class="listing_line">        maxLength = Integer.MAX_VALUE;  <span class="code_comment">// no or invalid argument</span>
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> startBatch(HTMLRuleContext ctx) 
</div><div class="listing_line">    {
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> finishBatch(HTMLRuleContext ctx) 
</div><div class="listing_line">    {
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public</span> String apply(String content, HTMLRuleContext ctx) 
</div><div class="listing_line">    {
</div><div class="listing_line">        String lang = ctx.getUILocale().getLanguage();
</div><div class="listing_line">        String result = <span class="code_keyword">null</span>;
</div><div class="listing_line">        
</div><div class="listing_line">        <span class="code_keyword">if</span> (ctx.isEnabled(CHECK_LENGTH)) {
</div><div class="listing_line">            <span class="code_keyword">if</span> (content.length() &gt; maxLength) {
</div><div class="listing_line">                ctx.log(CHECK_LENGTH, 
</div><div class="listing_line">                        label(lang, <span class="code_char">"length_exceeded"</span>, maxLength));
</div><div class="listing_line">            }
</div><div class="listing_line">        }
</div><div class="listing_line">        
</div><div class="listing_line">        <span class="code_keyword">if</span> (ctx.isEnabled(CHECK_EMPTY_SPAN)) {
</div><div class="listing_line">            <span class="code_keyword">final</span> String EMPTY_SPAN = <span class="code_char">"&lt;span&gt;&lt;/span&gt;"</span>;
</div><div class="listing_line">            <span class="code_keyword">boolean</span> updated = <span class="code_keyword">false</span>;
</div><div class="listing_line">            <span class="code_keyword">int</span> pos = <span class="code_literal">0</span>;
</div><div class="listing_line">            <span class="code_keyword">while</span> ((pos = content.indexOf(EMPTY_SPAN, pos)) &gt;= <span class="code_literal">0</span>) {
</div><div class="listing_line">                <span class="code_keyword">if</span> (ctx.isAutoCorrect(CHECK_EMPTY_SPAN)) {
</div><div class="listing_line">                    content = content.substring(<span class="code_literal">0</span>, pos) + 
</div><div class="listing_line">                      content.substring(pos + EMPTY_SPAN.length());
</div><div class="listing_line">                    ctx.logInfo(CHECK_EMPTY_SPAN, pos, 
</div><div class="listing_line">                      label(lang, <span class="code_char">"empty_span_removed"</span>));
</div><div class="listing_line">                    updated = <span class="code_keyword">true</span>;
</div><div class="listing_line">                } <span class="code_keyword">else</span> {
</div><div class="listing_line">                    ctx.log(CHECK_EMPTY_SPAN, pos, 
</div><div class="listing_line">                      label(lang, <span class="code_char">"empty_span_exists"</span>));
</div><div class="listing_line">                }
</div><div class="listing_line">            }
</div><div class="listing_line">            <span class="code_keyword">if</span> (updated) {  <span class="code_comment">// empty span has been removed</span>
</div><div class="listing_line">                result = content;  
</div><div class="listing_line">            }
</div><div class="listing_line">        }
</div><div class="listing_line">        
</div><div class="listing_line">        <span class="code_comment">// return modified content, or null if content is unchanged</span>
</div><div class="listing_line">        <span class="code_keyword">return</span> result;
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    <span class="code_keyword">private</span> String label(String lang, String msg, Object... args) 
</div><div class="listing_line">    {
</div><div class="listing_line">        <span class="code_keyword">return</span> PluginUtil.getResourceString(<span class="code_keyword">this</span>.getClass(), lang, 
</div><div class="listing_line">                                            msg, args);
</div><div class="listing_line">    }
</div><div class="listing_line">}
</div></td></tr></table></div></div><p class="title">Listing 4.5.1. MyHTMLRule.java</p></div>
<div class="normal-para">As already described, the <span class="code">label</span> method in this example loads localized strings from a XML file named <span class="code">MyHTMLRule_en.xml</span>. Following a complete example of the XML file:</div>
<div title="MyHTMLRule_en.xml" class="formal-block"><div class="formal-contents"><div title="MyHTMLRule_en.xml" class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div><div class="listing_line">8 
</div><div class="listing_line">9 
</div><div class="listing_line">10 
</div><div class="listing_line">11 
</div><div class="listing_line">12 
</div><div class="listing_line">13 
</div><div class="listing_line">14 
</div><div class="listing_line">15 
</div><div class="listing_line">16 
</div><div class="listing_line">17 
</div><div class="listing_line">18 
</div><div class="listing_line">19 
</div><div class="listing_line">20 
</div><div class="listing_line">21 
</div><div class="listing_line">22 
</div><div class="listing_line">23 
</div><div class="listing_line">24 
</div><div class="listing_line">25 
</div><div class="listing_line">26 
</div><div class="listing_line">27 
</div><div class="listing_line">28 
</div><div class="listing_line">29 
</div><div class="listing_line">30 
</div><div class="listing_line">31 
</div><div class="listing_line">32 
</div><div class="listing_line">33 
</div><div class="listing_line">34 
</div><div class="listing_line">35 
</div><div class="listing_line">36 
</div><div class="listing_line">37 
</div><div class="listing_line">38 
</div><div class="listing_line">39 
</div><div class="listing_line">40 
</div><div class="listing_line">41 
</div><div class="listing_line">42 
</div><div class="listing_line">43 
</div><div class="listing_line">44 
</div><div class="listing_line">45 
</div><div class="listing_line">46 
</div><div class="listing_line">47 
</div><div class="listing_line">48 
</div></td><td valign="top" class="listing_xml"><div class="listing_line"><span class="code_pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</div><div class="listing_line"><span class="code_xmlintro">&lt;!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"&gt;</span>
</div><div class="listing_line"><span class="code_tag">&lt;properties&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"shortInfo"</span><span class="code_tag">&gt;</span>Checks the length and empty spans.<span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"check_length.title"</span><span class="code_tag">&gt;</span>Checks the content length.<span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"check_empty_span.title"</span><span class="code_tag">&gt;</span>Checks empty spans.<span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"length_exceeded"</span><span class="code_tag">&gt;</span>Content exceeds {0} characters.<span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"empty_span_removed"</span><span class="code_tag">&gt;</span>Removed empty span.<span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"empty_span_exists"</span><span class="code_tag">&gt;</span>Content contains empty span.<span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;entry </span><span class="code_attrib">key=</span><span class="code_attval">"longInfo"</span><span class="code_tag">&gt;</span><span class="code_cdata">&lt;![CDATA[</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;p&gt;This class provides following checks:&lt;/p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;ul&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;li&gt;&lt;a href="#check_length"&gt;check_length&lt;/a&gt;&lt;/li&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;li&gt;&lt;a href="#check_empty_span"&gt;check_empty_span&lt;/a&gt;&lt;/li&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;/ul&gt;</span>
</div><div class="listing_line"><span class="code_cdata"></span>
</div><div class="listing_line"><span class="code_cdata">  &lt;a name="check_length" /&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;strong&gt;check_length&lt;/strong&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;div style="margin-left:16pt;"&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      &lt;u&gt;Arguments:&lt;/u&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      &lt;dl&gt;</span>
</div><div class="listing_line"><span class="code_cdata">        &lt;dt&gt;&lt;b&gt;&lt;tt&gt;maxlength=[&lt;i&gt;INTEGER&lt;/i&gt;|off]&lt;/tt&gt;&lt;/b&gt;&lt;/dt&gt;</span>
</div><div class="listing_line"><span class="code_cdata">        &lt;dd&gt;The maximum content length.&lt;/dd&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      &lt;/dl&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;/p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      &lt;u&gt;Description:&lt;/u&gt;&lt;br/&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      Writes a log message if the content length exceeds </span>
</div><div class="listing_line"><span class="code_cdata">      &lt;tt&gt;maxlength&lt;/tt&gt;.</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;/p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;/div&gt;</span>
</div><div class="listing_line"><span class="code_cdata"></span>
</div><div class="listing_line"><span class="code_cdata">  &lt;a name="check_empty_span" /&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;strong&gt;check_empty_span&lt;/strong&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;div style="margin-left:16pt;"&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      &lt;u&gt;Arguments:&lt;/u&gt; &lt;em&gt;none&lt;/em&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;/p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      &lt;u&gt;Description:&lt;/u&gt;&lt;br/&gt;</span>
</div><div class="listing_line"><span class="code_cdata">      Creates a log message if the content contains empty spans.</span>
</div><div class="listing_line"><span class="code_cdata">      If auto-correction is enabled, removes empty spans.</span>
</div><div class="listing_line"><span class="code_cdata">    &lt;/p&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  &lt;/div&gt;</span>
</div><div class="listing_line"><span class="code_cdata">  ]]&gt;</span>
</div><div class="listing_line">  <span class="code_tag">&lt;/entry&gt;</span>
</div><div class="listing_line"><span class="code_tag">&lt;/properties&gt;</span>
</div></td></tr></table></div></div><p class="title">Listing 4.5.2. MyHTMLRule_en.xml</p></div>
<div class="normal-para">Note that the value of the <span class="code">longInfo</span> property is given in a CDATA section. This avoids having to write the <span class="code">&lt;</span> and <span class="code">&gt;</span> characters as character entities (<span class="code">&amp;lt;</span> and <span class="code">&amp;gt;</span>).</div>
</div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="html_rule_apply.html"><span class="navlink-text">Prev</span></a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="rule_plugins.html"><span class="navlink-text">Up</span></a></td><td width="40%" align="right">&#160;<a accesskey="n" href="pt04ch05s12.html"><span class="navlink-text">Next</span></a></td></tr><tr><td width="40%" align="left" valign="top">4.5.10. apply&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><span class="navlink-text">Home</span></a></td><td width="40%" align="right" valign="top">&#160;4.5.12. Creating the Rule Plug-in</td></tr></table></div>
<div class="web_footer">
<p class="align-center">&#169; 2017 - www.docmenta.org</p>
</div>
</div>
<a id="showHideButton" onclick="showHideToc();" class="pointLeft" title="Hide TOC tree">&nbsp;</a></body>
</html>
