<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- Put your custom HTML head tags here and select this file in the HTML output configuration. -->
<!-- Note: The content of this file has to be XML (XHTML). -->
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="expires" content="43200" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="Docmenta 1.8.0"/>
<title>1.13.10. Syntax highlighting</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="home" href="index.html" title="Docmenta Tutorial and Reference"/>
<link rel="up" href="pt01ch13.html" title="1.13. Advanced Tasks"/>
<link rel="prev" href="line_numbering.html" title="1.13.9. Formatting of listings"/>
<link rel="prev" href="tut_html_preview_images.html" title="1.13.11. Creating HTML preview images"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css"/>
<link rel="stylesheet" type="text/css" href="common/css/positioning.css"/>
<script type="text/javascript">
  var treeCookieId = "treeview-1442167773665";
  var language = "en";
  var w = new Object();
  txt_filesfound = "Results";
  txt_enter_at_least_1_char = "You must enter at least one character.";
  txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
  txt_please_wait = "Please wait. Search in progress...";
  txt_results_for = "Results for: ";
</script>
<script type="text/javascript" src="common/jquery/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery.cookie.js"></script>
<script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script>
<script type="text/javascript" src="search/htmlFileList.js"></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"></script>
<script type="text/javascript" src="search/nwSearchFnt.js"></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js"></script>
<script type="text/javascript" src="search/index-1.js"></script>
<script type="text/javascript" src="search/index-2.js"></script>
<script type="text/javascript" src="search/index-3.js"></script>
<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript" src="common/main.js"></script>
</head>
<body>
<div id="header"><img id="webhelplogo1" align="left" src='common/images/logo1.png' alt="Logo"/><img id="webhelplogo2" align="right" src='common/images/logo2.png' alt="Logo"/><div class="webhelptitle"><div class="webhelptitle1">Chapter 1.13. Advanced Tasks</div><div class="webhelptitle2">1.13.10. Syntax highlighting</div></div><div id="navheader" align="right"><table><tr><td><img src="common/images/highlight-blue.gif" alt="H" onclick="toggleHighlight()" id="showHideHighlight" title="Toggle search result highlighting" /></td><td><a id="navhead-prev" accesskey="p" href="line_numbering.html"><span class="navlink-text">Prev</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-up" accesskey="u" href="pt01ch13.html"><span class="navlink-text">Up</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-next" accesskey="n" href="tut_html_preview_images.html"><span class="navlink-text">Next</span></a></td></tr></table></div></div>
<div id="leftnavigation"><div id="tabs"><ul id="tocsearchnavigation" style="display:none"><li id="tocnavigationtab"><a href="#treeDiv"><em>Contents</em></a></li><li id="searchnavigationtab"><a href="#searchDiv"><em>Search</em></a></li></ul><div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none;"><div id="treenavigationtitle" style="display:none;">Contents</div><ul id="tree" class="filetree"><li><span class="file"><a href="basic_concepts_terms.html">Installation and basic concepts</a></span><ul><li><span class="file"><a href="intro_product.html">Products</a></span></li><li><span class="file"><a href="intro_version.html">Versions</a></span></li><li><span class="file"><a href="intro_publication.html">Publications</a></span></li><li><span class="file"><a href="intro_output_configuration.html">Output Configurations</a></span></li><li><span class="file"><a href="intro_translation.html">Translation Mode</a></span></li></ul></li><li><span class="file"><a href="tut_create_product.html">Creating a new product</a></span></li><li><span class="file"><a href="tut_content_styles.html">Creating content and styles</a></span><ul><li><span class="file"><a href="tut_sect_para.html">Sections, paragraphs and predefined styles</a></span></li><li><span class="file"><a href="tut_lists.html">Lists</a></span></li><li><span class="file"><a href="tut_tables.html">Tables</a></span></li><li><span class="file"><a href="tut_images.html">Images</a></span></li><li><span class="file"><a href="tut_user_styles.html">User-defined styles</a></span></li></ul></li><li><span class="file"><a href="linking_content.html">Linking content</a></span><ul><li><span class="file"><a href="ref_sections.html">Referencing sections</a></span></li><li><span class="file"><a href="ref_images_tables.html">Referencing images and tables</a></span></li><li><span class="file"><a href="external_links.html">External links</a></span></li><li><span class="file"><a href="ref_files.html">Referencing files</a></span></li></ul></li><li><span class="file"><a href="tracking_progress.html">Tracking the completion status</a></span></li><li><span class="file"><a href="tut_manage_versions.html">Versions and revisions</a></span></li><li><span class="file"><a href="translate_content.html">Translating content</a></span></li><li><span class="file"><a href="tut_export_publication.html">Exporting publications</a></span><ul><li><span class="file"><a href="tut_publication_config.html">Publications</a></span></li><li><span class="file"><a href="tut_output_config.html">Output configurations</a></span></li><li><span class="file"><a href="tut_export_html.html">Export an HTML publication</a></span></li><li><span class="file"><a href="tut_export_pdf.html">Export a PDF publication</a></span></li><li><span class="file"><a href="tut_export_translation.html">Export a translated publication</a></span></li></ul></li><li><span class="file"><a href="tut_templates.html">Templates</a></span><ul><li><span class="file"><a href="tut_static_templates.html">Static Templates</a></span></li><li><span class="file"><a href="tut_dynamic_templates.html">Dynamic Templates</a></span></li></ul></li><li><span class="file"><a href="filtering_content.html">Filtering content</a></span><ul><li><span class="file"><a href="filtering_nodes.html">Node filtering</a></span></li><li><span class="file"><a href="node_variants.html">Node variants</a></span></li></ul></li><li><span class="file"><a href="inclusions.html">Inclusions</a></span><ul><li><span class="file"><a href="structural_inclusions.html">Structural inclusions</a></span></li><li><span class="file"><a href="inline_inclusions.html">Inline inclusions</a></span></li></ul></li><li><span class="file"><a href="tut_manage_users.html">Managing user accounts</a></span></li><li><span class="file"><a href="pt01ch13.html">Advanced Tasks</a></span><ul><li><span class="file"><a href="styling_titlepage.html">Styling the title-page</a></span></li><li><span class="file"><a href="create_coverpage.html">Creating a cover-page</a></span></li><li><span class="file"><a href="adapt_page_design.html">Adapting the PDF page design</a></span><ul><li><span class="file"><a href="tut_set_page_margins.html">Setting the page margins</a></span></li><li><span class="file"><a href="pt01ch13s03s02.html">Styling the chapter header</a></span></li><li><span class="file"><a href="pt01ch13s03s03.html">Defining the header/footer content</a></span></li><li><span class="file"><a href="pt01ch13s03s04.html">Styling the header and footer</a></span></li></ul></li><li><span class="file"><a href="gentext_settings.html">Gentext settings</a></span></li><li><span class="file"><a href="inter_publication_links.html">Inter-publication links</a></span></li><li><span class="file"><a href="create_index_entries.html">Creating index entries</a></span></li><li><span class="file"><a href="create_footnotes.html">Creating footnotes</a></span></li><li><span class="file"><a href="labeled_blocks.html">Labeled blocks</a></span></li><li><span class="file"><a href="line_numbering.html">Formatting of listings</a></span></li><li id="webhelp-currentid"><span class="file"><a href="syntax_highlighting.html">Syntax highlighting</a></span></li><li><span class="file"><a href="tut_html_preview_images.html">Creating HTML preview images</a></span></li><li><span class="file"><a href="customize_webhelp.html">Customizing the Web-Help design</a></span></li><li><span class="file"><a href="webhelp_create_layout.html">Creating a new Web-Help layout</a></span></li><li><span class="file"><a href="export_import_nodes.html">Export, import and migration</a></span></li><li><span class="file"><a href="integrate_other_systems.html">Integration with other systems</a></span></li><li><span class="file"><a href="create_plugin.html">Creating a plug-in</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="startWebHelpSearch(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><div align="center"><input id="textToSearch" name="textToSearch" type="text" class="searchText"/>&nbsp;<input onclick="startWebHelpSearch(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></div></fieldset></form></div><div id="closeSearchResults" style="display:none"><a href="javascript:closeSearchShowToc();">Contents</a></div><div id="searchResults"><div align="center"></div></div></div></div></div>
<div id="bookpartsnavigation"><ul><li class="book-currentpart"><a href="pt01.html">Tutorial</a></li><li><a href="reference_manual.html">Reference Manual</a></li></ul></div>
<div id="breadcrumbsnavigation" class="breadcrumbs"><span class="breadcrumb-link"><a class="breadcrumb_node" href="pt01.html">Tutorial</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb-link"><a class="breadcrumb_node" href="pt01ch13.html">Advanced Tasks</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb_node breadcrumb_lastnode">Syntax highlighting</span></div>
<div id="content"><div id="syntax_highlighting" class="section"><h3>1.13.10. Syntax highlighting</h3><div title="Syntax highlighting" class="doc-content"><div class="normal-para">In program listings it is very common to have syntax highlighting, i.e. to highlight keywords, comments and literals. Docmenta supports a regular expression based syntax highlighting which is described in this chapter.</div>
<div class="normal-para">As an example we'll create a simple syntax highlighting for XML/SGML content. The highlight configuration has to be provided as text-file. Therefore create a text-file with following content and upload it in a folder of the product-tree, e.g. to the folder <img height="14" alt="" width="14" src="images/folderopen.gif"     /> <span class="code">Files</span> &gt; <img height="14" alt="" width="14" src="images/folderopen.gif"     /> <span class="code">highlight_config</span>:</div>
<div class="normal-para code_listing">### Regular expression constants ###<br    />%NAME%      : [A-Za-z0-9_:\-\.]+<br    />%ATT_VALUE% : %NAME%|("[^"]*")|('[^']*')<br    />%ATT%       : %NAME%(\s*=\s*%ATT_VALUE%)?<br    /><br    />###<br    />### Highlight configuration ###<br    />###<br    /><br    /># Comments<br    />comment_style : &lt;!--.*?--&gt;<br    /><br    /># Opening or empty tag<br    />tag_style, attrib_style : &lt;%NAME%\s*((\s*%ATT%)*)\s*/?&gt;<br    /><br    /># Closing tag<br    />tag_style : &lt;/%NAME%&gt;<br    /></div>
<div class="normal-para">To be able to reference the file, assign an alias name to the file-node, i.e. select the file-node, open the context menu and choose <img height="14" alt="" width="15" src="images/edit_props_icon.gif"     /> "Edit Properties". To follow the tutorial, enter the alias name "<span class="code">highlight_xml_cfg</span>". The result should be as shown in the following screenshot:</div>
<div class="normal-para"><div title="Uploading the highlight configuration file" class="figure"><div class="mediaobject"><img title="Uploading the highlight configuration file" style="print-width: 100%;" alt="" width="800" src="images/tutorial_highlight_cfg_file.gif"     /></div><p class="title">Figure 1.13.75. Uploading the highlight configuration file</p></div></div>
<div class="header_note">
<div class="normal-para">the XML/SGML highlight configuration example:</div>
</div>
<div class="note_box">
<div class="normal-para">The example configuration starts with the definition of the regular-expression constant <span class="code">%NAME%</span>, which holds the pattern of an XML/SGML element/attribute name. Here, an element/attribute name is defined as a sequence of letters, digits, the underscore, the colon, the dash and the dot character. Note that the XML/SGML specification allows more characters to be used within element and attribute names, however this configuration should be sufficient in most cases and can be extended if needed.</div>
<div class="normal-para">The second definition is the regular expression constant <span class="code">%ATT_VALUE%</span>, which holds the pattern of an attribute value. Here, an attribute value is defined as either a string that follows the rules of an element/attribute name or as a string enclosed in double or single quotes. As you can see, the regular-expression constant <span class="code">%ATT_VALUE%</span> includes the previously defined constant <span class="code">%NAME%</span>. This way it is possible to avoid repetition of expressions. Be aware that a constant has to be defined <em>before</em> it is referenced.</div>
<div class="normal-para">The third definition is the constant <span class="code">%ATT%</span>, which holds the pattern of a complete attribute. A complete attribute is defined as a name which is optionally followed by a <span class="code">=</span> character and an attribute value (with an arbitrary number of whitespace characters in between).</div>
<div class="normal-para">The constant definitions are followed by three highlight definitions: the first assigns the style <span class="code">comment_style</span> to a regular-expression that matches XML/SGML comments (note that the reluctant quantifier <span class="code">*?</span> is used here, to disable the greedy behavior of the quantifier <span class="code">*</span>). The second assignes the style <span class="code">tag_style</span> to a regular-expression that matches opening tags. If an opening tag contains attributes, then these are formatted with style <span class="code">attrib_style</span>. The third assigns the style <span class="code">tag_style</span> to a regular-expression that matches closing tags.</div>
<div class="normal-para">Note that the example highlight configuration may also work for content that does not completely follow the XML/SGML rules. For details on the highlight configuration see the chapter <a title="2.8.3. org.docma.plugin.examples.RegExpHighlight" href="ref_af_regexphighlight.html">Section 2.8.3, “org.docma.plugin.examples.RegExpHighlight”</a>.</div>
</div>
<div class="normal-para">The highlight configuration defines regular expressions for the styles with ID "<span class="code">comment_style</span>", "<span class="code">tag_style</span>" and "<span class="code">attrib_style</span>". Therefore, create inline-styles with these IDs and assign the CSS properties, i.e. the CSS properties that shall be used for XML/SGML comments, tags and attributes. To follow the tutorial, set following properties:</div>
<table style="border-color: #000000; border-width: 2px; width: 360px; border-style: solid;" cellpadding="4" border="2" cellspacing="0" rules="rows">
<tbody>
<tr><th style="width: 140px;" align="left">Style</th><th style="width: 220px;" align="left">CSS properties</th></tr>
<tr>
<td valign="top"><span class="code">comment_style</span></td>
<td><strong>color</strong>: #808080</td>
</tr>
<tr>
<td valign="top">
<div class="normal-para"><span class="code">tag_style</span></div>
</td>
<td><strong><strong>color</strong></strong>: #0000E0</td>
</tr>
<tr>
<td valign="top">
<div class="normal-para"><span class="code">attrib_style</span></div>
</td>
<td><strong>color</strong>: #993399</td>
</tr>
</tbody>
</table>
<div class="normal-para">Now that the highlight configuration and the highlight styles exist, we have to activate the syntax-highlighting for the <span class="code">listing</span>-style (the style that we have already used in the previous chapters). Therefore, open the style-dialog of the <span class="code">listing</span>-style and click the "Add" button next to the Auto-Format list <img height="14" alt="" width="14" src="images/callout_1.gif"     />. In the opened dialog, select the Auto-Format class org.docma.plugin.examples.RegExpHighlight <img height="14" alt="" width="14" src="images/callout_2.gif"     /> and enter the text "cfg=highlight_xml_cfg" in the Arguments input field <img height="14" alt="" width="14" src="images/callout_3.gif"     />:</div>
<div class="normal-para"><div title="Adding an Auto-Format entry" class="figure"><div class="mediaobject"><img title="Adding an Auto-Format entry" style="print-width: 100%;" alt="" width="800" src="images/tutorial_highlight_add_autoformat.gif"     /></div><p class="title">Figure 1.13.76. Adding an Auto-Format entry</p></div></div>
<div class="normal-para">Close the "Auto-Format Style Settings"-dialog by clicking the "Okay" button. The new entry is then added after the <span class="code">org.docma.plugin.examples.FormatLines</span> entry that we've created in the previous chapter of this tutorial:</div>
<div class="normal-para"><div title="Added Auto-Format entry" class="figure"><div class="mediaobject"><img title="Added Auto-Format entry" alt="" src="images/tutorial_highlight_move_af_up.gif"     /></div><p class="title">Figure 1.13.77. Added Auto-Format entry</p></div></div>
<div class="normal-para">This means the syntax highlighting would be applied after the formatting of the lines. Unfortunately this would lead to unexpected results, because the formatting of the lines cuts the content into blocks, each containing one line. However the regular expressions of the syntax highlighting might require to match more than a single line. To avoid this problem, we first apply the syntax-highlighting and format the lines afterwards. To do this, select the created entry <img height="14" alt="" width="14" src="images/callout_1.gif"     /> and click the arrow-up button next to the Auto-Format list <img height="14" alt="" width="14" src="images/callout_2.gif"     />. This moves the selected entry to the beginning of the list:</div>
<div class="normal-para"><div title="Corrected order of Auto-Format entries" class="figure"><div class="mediaobject"><img title="Corrected order of Auto-Format entries" alt="" src="images/tutorial_highlight_af_moved_up.gif"     /></div><p class="title">Figure 1.13.78. Corrected order of Auto-Format entries</p></div></div>
<div class="normal-para">Click "Okay" to close the style-dialog. When you now preview the listing that you've created in the previous chapter of this tutorial, the listing should be rendered with syntax highlighting. Add an XML comment and tag attributes to the listing, to check that highlighting works as expected:</div>
<div class="normal-para"><div title="Previewing the listing with syntax highlighting" class="figure"><div class="mediaobject"><img title="Previewing the listing with syntax highlighting" alt="" src="images/tutorial_highlight_preview.gif"     /></div><p class="title">Figure 1.13.79. Previewing the listing with syntax highlighting</p></div></div>
<div class="normal-para">This was an introduction to the Docmenta syntax highlighting feature. For additional highlight configuration examples see the Docmenta homepage (<a href="http://www.docmenta.org" target="_top">http://www.docmenta.org</a>).</div>
</div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="line_numbering.html"><span class="navlink-text">Prev</span></a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="pt01ch13.html"><span class="navlink-text">Up</span></a></td><td width="40%" align="right">&#160;<a accesskey="n" href="tut_html_preview_images.html"><span class="navlink-text">Next</span></a></td></tr><tr><td width="40%" align="left" valign="top">1.13.9. Formatting of listings&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><span class="navlink-text">Home</span></a></td><td width="40%" align="right" valign="top">&#160;1.13.11. Creating HTML preview images</td></tr></table></div>
<div class="web_footer">
<p class="align-center">&#169; 2015 - www.docmenta.org</p>
</div>
</div>
<a id="showHideButton" onclick="showHideToc();" class="pointLeft" title="Hide TOC tree">&nbsp;</a></body>
</html>
