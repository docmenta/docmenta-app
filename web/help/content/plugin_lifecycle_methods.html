<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<!-- Put your custom HTML head tags here and select this file in the HTML output configuration. -->
<!-- Note: The content of this file has to be XML (XHTML). -->
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="expires" content="43200" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="Docmenta 1.9.0"/>
<title>4.3.1. Lifecycle methods</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
<link rel="home" href="index.html" title="Docmenta Tutorial and Reference"/>
<link rel="up" href="plugin_api.html" title="4.3. Plug-in API"/>
<link rel="prev" href="plugin_api.html" title="4.3. Plug-in API"/>
<link rel="prev" href="plugin_add_menu.html" title="4.3.2. Adding menu items"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/>
<link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css"/>
<link rel="stylesheet" type="text/css" href="common/css/positioning.css"/>
<script type="text/javascript">
  var treeCookieId = "treeview-1494620492855";
  var language = "en";
  var w = new Object();
  txt_filesfound = "Results";
  txt_enter_at_least_1_char = "You must enter at least one character.";
  txt_browser_not_supported = "Your browser is not supported. Use of Mozilla Firefox is recommended.";
  txt_please_wait = "Please wait. Search in progress...";
  txt_results_for = "Results for: ";
</script>
<script type="text/javascript" src="common/jquery/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="common/jquery/jquery.cookie.js"></script>
<script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script>
<script type="text/javascript" src="search/htmlFileList.js"></script>
<script type="text/javascript" src="search/htmlFileInfoList.js"></script>
<script type="text/javascript" src="search/nwSearchFnt.js"></script>
<script type="text/javascript" src="search/stemmers/en_stemmer.js"></script>
<script type="text/javascript" src="search/index-1.js"></script>
<script type="text/javascript" src="search/index-2.js"></script>
<script type="text/javascript" src="search/index-3.js"></script>
<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript" src="common/main.js"></script>
</head>
<body>
<div id="header"><img id="webhelplogo1" align="left" src='common/images/logo1.png' alt="Logo"/><img id="webhelplogo2" align="right" src='common/images/logo2.png' alt="Logo"/><div class="webhelptitle"><div class="webhelptitle1">Chapter 4.3. Plug-in API</div><div class="webhelptitle2">4.3.1. Lifecycle methods</div></div><div id="navheader" align="right"><table><tr><td><img src="common/images/highlight-blue.gif" alt="H" onclick="toggleHighlight()" id="showHideHighlight" title="Toggle search result highlighting" /></td><td><a id="navhead-prev" accesskey="p" href="plugin_api.html"><span class="navlink-text">Prev</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-up" accesskey="u" href="plugin_api.html"><span class="navlink-text">Up</span></a><span class="navhead-separator">&nbsp;|&nbsp;</span><a id="navhead-next" accesskey="n" href="plugin_add_menu.html"><span class="navlink-text">Next</span></a></td></tr></table></div></div>
<div id="leftnavigation"><div id="tabs"><ul id="tocsearchnavigation" style="display:none"><li id="tocnavigationtab"><a href="#treeDiv"><em>Contents</em></a></li><li id="searchnavigationtab"><a href="#searchDiv"><em>Search</em></a></li></ul><div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none;"><div id="treenavigationtitle" style="display:none;">Contents</div><ul id="tree" class="filetree"><li><span class="file"><a href="pt04ch01.html">Introduction</a></span></li><li><span class="file"><a href="create_plugin_package.html">Creating a plug-in package</a></span></li><li><span class="file"><a href="plugin_api.html">Plug-in API</a></span><ul><li id="webhelp-currentid"><span class="file"><a href="plugin_lifecycle_methods.html">Lifecycle methods</a></span></li><li><span class="file"><a href="plugin_add_menu.html">Adding menu items</a></span></li><li><span class="file"><a href="plugin_add_dialog.html">Adding a dialog</a></span><ul><li><span class="file"><a href="plugin_plain_js_dialogs.html">Plain JavaScript Dialogs</a></span></li><li><span class="file"><a href="plugin_zk_dialogs.html">ZK Dialogs</a></span></li></ul></li><li><span class="file"><a href="plugin_add_tab.html">Adding a tab</a></span></li><li><span class="file"><a href="plugin_jsp_integration.html">JSP integration</a></span></li><li><span class="file"><a href="pt04ch03s06.html">Accessing content</a></span></li></ul></li><li><span class="file"><a href="content_handler_plugins.html">Editor and viewer plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s01.html">Content Handlers</a></span></li><li><span class="file"><a href="plug_viewer.html">Viewer Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s02s01.html">initialize</a></span></li><li><span class="file"><a href="pt04ch04s02s02.html">getApplicationId</a></span></li><li><span class="file"><a href="pt04ch04s02s03.html">getApplicationName</a></span></li><li><span class="file"><a href="pt04ch04s02s04.html">getSupportedViewExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s05.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s02s06.html">getPreviewURL</a></span></li><li><span class="file"><a href="pt04ch04s02s07.html">openViewer</a></span></li><li><span class="file"><a href="pt04ch04s02s08.html">openEditor</a></span></li><li><span class="file"><a href="pt04ch04s02s09.html">setCharEntities</a></span></li><li><span class="file"><a href="plug_view_handler_complete.html">The complete viewer class</a></span></li><li><span class="file"><a href="pt04ch04s02s11.html">The view.jsp page</a></span></li><li><span class="file"><a href="plug_viewer_package.html">Creating the viewer plug-in</a></span></li><li><span class="file"><a href="plug_viewer_install.html">Installing the viewer plug-in</a></span></li></ul></li><li><span class="file"><a href="pt04ch04s03.html">Editor Plug-ins</a></span><ul><li><span class="file"><a href="pt04ch04s03s01.html">getSupportedEditExtensions</a></span></li><li><span class="file"><a href="pt04ch04s03s02.html">openEditor</a></span></li><li><span class="file"><a href="plug_edit_handler_complete.html">The complete editor class</a></span></li><li><span class="file"><a href="pt04ch04s03s04.html">The edit.jsp page</a></span></li><li><span class="file"><a href="pt04ch04s03s05.html">Creating the editor plug-in</a></span></li></ul></li></ul></li><li><span class="file"><a href="rule_plugins.html">Rule plug-ins</a></span><ul><li><span class="file"><a href="html_rule_getShortInfo.html">getShortInfo</a></span></li><li><span class="file"><a href="pt04ch05s02.html">getLongInfo</a></span></li><li><span class="file"><a href="pt04ch05s03.html">getCheckIds</a></span></li><li><span class="file"><a href="pt04ch05s04.html">getCheckTitle</a></span></li><li><span class="file"><a href="pt04ch05s05.html">supportsAutoCorrection</a></span></li><li><span class="file"><a href="pt04ch05s06.html">getDefaultLogLevel</a></span></li><li><span class="file"><a href="pt04ch05s07.html">configure</a></span></li><li><span class="file"><a href="pt04ch05s08.html">startBatch</a></span></li><li><span class="file"><a href="pt04ch05s09.html">finishBatch</a></span></li><li><span class="file"><a href="html_rule_apply.html">apply</a></span></li><li><span class="file"><a href="my_html_rule_complete.html">The complete example</a></span></li><li><span class="file"><a href="pt04ch05s12.html">Creating the Rule Plug-in</a></span></li></ul></li><li><span class="file"><a href="autoformat_plugins.html">AutoFormat plug-ins</a></span><ul><li><span class="file"><a href="pt04ch06s01.html">AutoFormat Transformations</a></span></li><li><span class="file"><a href="pt04ch06s02.html">AutoFormat Example</a></span></li><li><span class="file"><a href="pt04ch06s03.html">Creating an AutoFormat Plug-in</a></span></li></ul></li><li><span class="file"><a href="output_plugins.html">Output plug-ins</a></span></li><li><span class="file"><a href="customize_pdf_stylesheet.html">PDF stylesheet customization</a></span><ul><li><span class="file"><a href="customize_docbook_transformation.html">Customizing the transformation to DocBook</a></span></li><li><span class="file"><a href="pt04ch08s02.html">Customizing the DocBook stylesheets</a></span></li><li><span class="file"><a href="pt04ch08s03.html">Creating the stylesheet plug-in</a></span></li></ul></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="startWebHelpSearch(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><div align="center"><input id="textToSearch" name="textToSearch" type="text" class="searchText"/>&nbsp;<input onclick="startWebHelpSearch(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></div></fieldset></form></div><div id="closeSearchResults" style="display:none"><a href="javascript:closeSearchShowToc();">Contents</a></div><div id="searchResults"><div align="center"></div></div></div></div></div>
<div id="bookpartsnavigation"><ul><li><a href="tutorial.html">Tutorial</a></li><li><a href="reference_manual.html">User Manual</a></li><li><a href="xhtml_reference.html">XHTML Reference</a></li><li class="book-currentpart"><a href="plugin_developer_guide.html">Plug-in Developer Guide</a></li></ul></div>
<div id="breadcrumbsnavigation" class="breadcrumbs"><span class="breadcrumb-link"><a class="breadcrumb_node" href="plugin_developer_guide.html">Plug-in Developer Guide</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb-link"><a class="breadcrumb_node" href="plugin_api.html">Plug-in API</a></span> <span class="breadcrumb_separator">&rarr;</span> <span class="breadcrumb_node breadcrumb_lastnode">Lifecycle methods</span></div>
<div id="content"><div id="plugin_lifecycle_methods" class="section"><h3>4.3.1. Lifecycle methods</h3><div title="Plugin interface" class="doc-content"><div class="normal-para">The starting point of every plug-in that needs access to the Docmenta Plug-in API is the interface <span class="code">org.docma.plugin.Plugin</span>. To create such a plug-in you need to create a Java class that implements this interface. The interface defines lifecycle methods as listed in the following table:</div>
<table border="2" cellpadding="4" cellspacing="0" style="border-color: #000000; border-width: 2px; width: 90%; border-style: solid;" rules="rows"><caption>Table 4.3.1. org.docma.plugin.Plugin interface methods</caption>
<tbody>
<tr><th style="width: 180px;" class="align-left">Method</th><th class="align-left">Description</th></tr>
<tr>
<td><span class="code">onLoad</span></td>
<td>This method is called when the plug-in is loaded, e.g. on server-startup.</td>
</tr>
<tr>
<td><span class="code">onUnload</span></td>
<td>This method is called when the plug-in is unloaded, e.g. when the plug-in is uninstalled or disabled.</td>
</tr>
</tbody>
</table>
<div class="normal-para">The simplest plug-in without any functionality is as follows:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div><div class="listing_line">8 
</div><div class="listing_line">9 
</div><div class="listing_line">10 
</div><div class="listing_line">11 
</div><div class="listing_line">12 
</div><div class="listing_line">13 
</div><div class="listing_line">14 
</div><div class="listing_line">15 
</div></td><td valign="top" class="listing_java"><div class="listing_line"><span class="code_keyword">package</span> myexample;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.Plugin;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.PluginContext;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">public class</span> MyPlugin <span class="code_keyword">implements</span> Plugin {
</div><div class="listing_line"> 
</div><div class="listing_line">    <span class="code_keyword">public void</span> onLoad(PluginContext ctx) <span class="code_keyword">throws</span> Exception {
</div><div class="listing_line">        <span class="code_comment">// insert your code here</span>
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    <span class="code_keyword">public void</span> onUnload(PluginContext ctx) <span class="code_keyword">throws</span> Exception {
</div><div class="listing_line">        <span class="code_comment">// insert your code here</span>
</div><div class="listing_line">    }
</div><div class="listing_line">}
</div></td></tr></table></div></div><p class="title">Listing 4.3.1. </p></div>
<div class="normal-para">There is a default implementation of this interface that just provides no-operation implementations of all interface methods. The classname of the default implementation is <span class="code">org.docma.plugin.DefaultPlugin</span>. Therefore, the code above can be reduced by creating a class that extends <span class="code">org.docma.plugin.DefaultPlugin</span>:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div></td><td valign="top" class="listing_java"><div class="listing_line"><span class="code_keyword">package</span> myexample;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">public class</span> MyPlugin <span class="code_keyword">extends</span> org.docma.plugin.DefaultPlugin {
</div><div class="listing_line">}
</div></td></tr></table></div></div><p class="title">Listing 4.3.2. </p></div>
<div class="normal-para">Note that the Docmenta plug-in framework creates an instance of the plug-in by calling the default constructor of your plug-in class (i.e. the constructor without parameters). As a consequence, your plug-in class is not allowed to declare the default constructor as private. Anyhow, it is discouraged to define a constructor at all, because all functionality should be provided by overwriting the lifecycle methods.</div>
</div><div title="Simple log plugin" class="doc-content"><div class="normal-para">To test the lifecycle methods, we create a plug-in that just writes some messages to the application's log:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div><div class="listing_line">8 
</div><div class="listing_line">9 
</div><div class="listing_line">10 
</div><div class="listing_line">11 
</div><div class="listing_line">12 
</div><div class="listing_line">13 
</div><div class="listing_line">14 
</div><div class="listing_line">15 
</div><div class="listing_line">16 
</div></td><td valign="top" class="listing_java"><div class="listing_line"><span class="code_keyword">package</span> myexample;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.*;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">public class</span> MyPlugin <span class="code_keyword">implements</span> Plugin {
</div><div class="listing_line"> 
</div><div class="listing_line">    <span class="code_keyword">public void</span> onLoad(PluginContext ctx) <span class="code_keyword">throws</span> Exception {
</div><div class="listing_line">        Logger log = ctx.getApplicationContext().getLogger();
</div><div class="listing_line">        log.info(ctx.getPluginId() + <span class="code_char">": onLoad"</span>);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    <span class="code_keyword">public void</span> onUnload(PluginContext ctx) <span class="code_keyword">throws</span> Exception {
</div><div class="listing_line">        Logger log = ctx.getApplicationContext().getLogger();
</div><div class="listing_line">        log.info(ctx.getPluginId() + <span class="code_char">": onUnload"</span>);
</div><div class="listing_line">    }
</div><div class="listing_line">}
</div></td></tr></table></div></div><p class="title">Listing 4.3.3. </p></div>
<div class="normal-para">The lifecycle methods have a parameter of type <span class="code">org.docma.plugin.PluginContext</span>. This parameter allows to access the Docmenta environment. In the example above, this parameter is used to get the application context, which in turn allows access to the application logger. Furthermore, the PluginContext object allows to retrieve the plug-in properties, e.g. the <span class="code">getPluginId()</span> method returns the plug-in identifier that is defined in the <span class="code">plugin.properties</span> as shown below.</div>
<div class="normal-para">To be able to install the plug-in, we need to create a plug-in package. Therefore, create a file-structure as described in <a href="create_plugin_package.html" title="4.2. Creating a plug-in package">Chapter 4.2, Creating a plug-in package</a> and place the compiled class in the <span class="code">web/WEB-INF/classes</span> folder. Alternatively add the class files to a JAR archive and place the JAR file in the <span class="code">lib</span> or <span class="code">web/WEB-INF/lib</span> folder. The resulting file structure should be as follows:</div>
<div class="normal-para"><div title="Plug-in package structure" class="figure"><div class="mediaobject"><img src="images/plugin_log_folder_structure.gif" alt="" title="Plug-in package structure"     /></div><p class="title">Figure 4.3.1. Plug-in package structure</p></div></div>
<div class="normal-para">Before creating the zip package, the files </div>
<ul>
<li><span class="code">plugin.properties</span> and</li>
<li><span class="code">locale.properties</span></li>
</ul>
<div class="normal-para">need to be adapted. Following an example of the <span class="code">plugin.properties</span> file:</div>
<div title="plugin.properties (log example)" class="formal-block"><div class="formal-contents"><div title="plugin.properties (log example)" class="_formal_code_listing"><p class="listing_properties">id = my_plugin<br    />version = 1.0<br    />plugin_class = myexample.MyPlugin<br    />required_app_version = 1.9<br    />show_license = false<br    />load_type = next_startup<br    /></p></div></div><p class="title">Listing 4.3.4. plugin.properties (log example)</p></div>
<div class="normal-para">The <span class="code">plugin_class</span> property is an optional property that is required only if a custom plug-in class shall be provided. In the example above, Docmenta is instructed to instantiate the plug-in class <span class="code">myexample.MyPlugin</span> instead of the default plug-in class. For an explanation of the other properties see <a href="create_plugin_package.html" title="4.2. Creating a plug-in package">Chapter 4.2, Creating a plug-in package</a>. Note that the <span class="code">load_type</span> property needs to be set to "<span class="code">next_startup</span>", because the added <span class="code">myexample.MyPlugin</span> class will not be available until the next web-server startup.</div>
<div class="normal-para">For completeness, following an example of the <span class="code">locale.properties</span> file:</div>
<div title="locale.properties (log example)" class="formal-block"><div class="formal-contents"><div title="locale.properties (log example)" class="_formal_code_listing"><p class="listing_properties">my_plugin.description = A simple logging Plug-in<br    />my_plugin.help_url = <br    /></p></div></div><p class="title">Listing 4.3.5. locale.properties (log example)</p></div>
<div class="normal-para">Note that in this example the property <span class="code">my_plugin.help_url</span> is set to an empty string, because we do not provide a help-page for our plug-in until now.</div>
<div class="normal-para">Finally, we can create the zip-package and install the plug-in as described in <a href="manage_plugins.html" title="2.7.5. Installing Plug-ins">Section 2.7.5, “Installing Plug-ins”</a>.</div>
<div class="normal-para">To test the plug-in, enable and disable the plug-in in the administration panel (see <a href="manage_plugins.html" title="2.7.5. Installing Plug-ins">Section 2.7.5, “Installing Plug-ins”</a>) and check the web-server log file for the appended log messages.</div>
</div><div title="WebPlugin interface" class="doc-content"><div class="header_para">
<div class="normal-para">Creating a web-application plug-in</div>
</div>
<div class="normal-para">If you want to create a plug-in that extends the web user-interface of Docmenta, then the plug-in has to implement the <span class="code">org.docma.plugin.web.WebPlugin</span> interface. This interface extends the <span class="code">Plugin</span> interface by adding the lifecycle methods shown in the following table:</div>
<table border="2" cellpadding="4" cellspacing="0" style="border-color: #000000; border-width: 2px; width: 90%; border-style: solid;" rules="rows"><caption>Table 4.3.2. org.docma.plugin.web.WebPlugin interface methods</caption>
<tbody>
<tr><th style="width: 210px;" class="align-left">Method</th><th class="align-left">Description</th></tr>
<tr>
<td><span class="code">onInitMainWindow</span></td>
<td>This method is called when the main window of a new user session is initialized. This occurs on every user login.</td>
</tr>
<tr>
<td><span class="code">onShowConfigDialog</span></td>
<td>This method is called whenever a user clicks the "Configure" button of the plug-in (see <a href="manage_plugins.html" title="2.7.5. Installing Plug-ins">Section 2.7.5, “Installing Plug-ins”</a>). See also <a href="plugin_add_dialog.html" title="4.3.3. Adding a dialog">Section 4.3.3, “Adding a dialog”</a> on how to create a custom dialog.</td>
</tr>
</tbody>
</table>
<div class="normal-para">Again there is a default implementation that just provides no-operation implementations of all interface methods. The classname of the default implementation is <span class="code">org.docma.plugin.web.DefaultWebPlugin</span>.</div>
</div><div title="Simple web plugin" class="doc-content"><div class="normal-para">Following code shows a simple <span class="code">WebPlugin</span> implementation that just writes a log message whenever one of the <span class="code">WebPlugin</span> lifecycle methods is called:</div>
<div title="" class="formal-block"><div class="formal-contents"><div class="_formal_code_listing"><table border="0" cellpadding="0" width="100%" cellspacing="0" style="keep-together:auto;"><tr><td valign="top" style="width:22pt;"><div class="listing_line">1 
</div><div class="listing_line">2 
</div><div class="listing_line">3 
</div><div class="listing_line">4 
</div><div class="listing_line">5 
</div><div class="listing_line">6 
</div><div class="listing_line">7 
</div><div class="listing_line">8 
</div><div class="listing_line">9 
</div><div class="listing_line">10 
</div><div class="listing_line">11 
</div><div class="listing_line">12 
</div><div class="listing_line">13 
</div><div class="listing_line">14 
</div><div class="listing_line">15 
</div><div class="listing_line">16 
</div><div class="listing_line">17 
</div><div class="listing_line">18 
</div><div class="listing_line">19 
</div><div class="listing_line">20 
</div><div class="listing_line">21 
</div><div class="listing_line">22 
</div></td><td valign="top" class="listing_java"><div class="listing_line"><span class="code_keyword">package</span> myexample;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.*;
</div><div class="listing_line"><span class="code_keyword">import</span> org.docma.plugin.web.*;
</div><div class="listing_line"> 
</div><div class="listing_line"><span class="code_keyword">public class</span> MyWebPlugin <span class="code_keyword">extends</span> DefaultWebPlugin {
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> onInitMainWindow(WebPluginContext ctx, 
</div><div class="listing_line">                                 WebUserSession webSess) {
</div><div class="listing_line">        Logger log = ctx.getApplicationContext().getLogger();
</div><div class="listing_line">        log.info(ctx.getPluginId() + <span class="code_char">": user "</span> + 
</div><div class="listing_line">                 webSess.getUser().getLoginId() + <span class="code_char">" logged in."</span>);
</div><div class="listing_line">    }
</div><div class="listing_line"> 
</div><div class="listing_line">    @Override
</div><div class="listing_line">    <span class="code_keyword">public void</span> onShowConfigDialog(WebPluginContext ctx, 
</div><div class="listing_line">                                   WebUserSession webSess) {
</div><div class="listing_line">        Logger log = ctx.getApplicationContext().getLogger();
</div><div class="listing_line">        log.info(ctx.getPluginId() + <span class="code_char">": onShowConfigDialog"</span>);
</div><div class="listing_line">    }
</div><div class="listing_line">}
</div></td></tr></table></div></div><p class="title">Listing 4.3.6. </p></div>
<div class="normal-para">Note that <span class="code">WebPlugin</span> methods have an additional parameter of type <span class="code">org.docma.plugin.web.WebUserSession</span>, which allows access to the user session. In the example above this parameter is used to retrieve the user's login name.</div>
<div class="normal-para">For more information on the available methods and its parameters see the Docmenta Plug-in JavaDoc documentation.</div>
<div class="normal-para">The next sections describe how to add menu items, dialogs and tabs to the user interface of Docmenta. Furthermore the sections give a general introduction in using the Plug-in API.</div></div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="plugin_api.html"><span class="navlink-text">Prev</span></a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="plugin_api.html"><span class="navlink-text">Up</span></a></td><td width="40%" align="right">&#160;<a accesskey="n" href="plugin_add_menu.html"><span class="navlink-text">Next</span></a></td></tr><tr><td width="40%" align="left" valign="top">4.3. Plug-in API&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><span class="navlink-text">Home</span></a></td><td width="40%" align="right" valign="top">&#160;4.3.2. Adding menu items</td></tr></table></div>
<div class="web_footer">
<p class="align-center">&#169; 2017 - www.docmenta.org</p>
</div>
</div>
<a id="showHideButton" onclick="showHideToc();" class="pointLeft" title="Hide TOC tree">&nbsp;</a></body>
</html>
